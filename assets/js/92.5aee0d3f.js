(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{748:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"动态网页爬虫"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态网页爬虫"}},[t._v("#")]),t._v(" 动态网页爬虫")]),t._v(" "),a("h2",{attrs:{id:"ajax是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ajax是什么"}},[t._v("#")]),t._v(" Ajax是什么")]),t._v(" "),a("p",[t._v("AJAX（Asynchronouse JavaScript And XML）异步JavaScript和XML。过在后台与服务器进行少量数据交换，Ajax 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。传统的网页（不使用Ajax）如果需要更新内容，必须重载整个网页页面。因为传统的在传输数据格式方面，使用的是XML语法。因此叫做AJAX，其实现在数据交互基本上都是使用JSON。使用AJAX加载的数据，即使使用了JS，将数据渲染到了浏览器中，在右键->查看网页源代码还是不能看到通过ajax加载的数据，只能看到使用这个url加载的html代码")]),t._v(" "),a("h2",{attrs:{id:"获取ajax数据的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取ajax数据的方式"}},[t._v("#")]),t._v(" 获取Ajax数据的方式")]),t._v(" "),a("ul",[a("li",[t._v("直接分析ajax调用的接口。然后通过代码请求这个接口")]),t._v(" "),a("li",[t._v("使用 "),a("code",[t._v("selenium")]),t._v(" + "),a("code",[t._v("chromedriver")]),t._v(" 模拟浏览器行为获取数据")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("方式")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("优点")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("缺点")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("分析接口")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("直接可以请求到数据，不需要做任何解析工作，代码量少，性能高")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("分析接口比较复杂，特别是一些通过js混淆的接口，容易被发现是爬虫")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("selenium")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("直接模拟浏览器的行为，浏览器可以请求到的，使用 selenium 也能请求到，比较稳定")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("代码量多，性能低")])])])]),t._v(" "),a("h2",{attrs:{id:"selenium-chromedriver-获取动态数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selenium-chromedriver-获取动态数据"}},[t._v("#")]),t._v(" "),a("code",[t._v("selenium")]),t._v(" + "),a("code",[t._v("chromedriver")]),t._v(" 获取动态数据")]),t._v(" "),a("p",[t._v("selenium相当于是一个机器人，可以模拟人在浏览器上的一些行为，自动处理浏览器上的一些行为，比如点击，填充数据，删除cookie等")]),t._v(" "),a("p",[t._v("chromedriver是一个驱动chrome浏览器的驱动程序，使用他才可以驱动浏览器，针对不同的浏览器有不同的driver")]),t._v(" "),a("ul",[a("li",[t._v("Chrome："),a("a",{attrs:{href:"https://sites.google.com/a/chromium.org/chromedriver/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://sites.google.com/a/chromium.org/chromedriver/downloads"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Firefox："),a("a",{attrs:{href:"https://github.com/mozilla/geckodriver/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/mozilla/geckodriver/releases"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Edge："),a("a",{attrs:{href:"https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.microsoft.com/en-us/microsoft-edge/tools/webdriver/"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Safari："),a("a",{attrs:{href:"https://webkit.org/blog/6900/webdriver-support-in-safari-10/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://webkit.org/blog/6900/webdriver-support-in-safari-10/"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"安装-selenium-chromedriver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装-selenium-chromedriver"}},[t._v("#")]),t._v(" 安装 "),a("code",[t._v("selenium")]),t._v(" + "),a("code",[t._v("chromedriver")])]),t._v(" "),a("ul",[a("li",[t._v("安装selenium：selenium有很多语言的版本，有java、ruby、python等 "),a("code",[t._v("pip install selenium")])]),t._v(" "),a("li",[t._v("安装chromedriver：下载和自己浏览器版本对应的文件，放到不需要权限的纯英文目录下就可以了")])]),t._v(" "),a("h2",{attrs:{id:"简单使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单使用"}},[t._v("#")]),t._v(" 简单使用")]),t._v(" "),a("p",[t._v("以一个简单的获取百度首页的例子使用 selenium和chromedriver")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chromedriver的绝对路径")]),t._v("\ndriver_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'D:\\Program Files\\chromedriver\\chromedriver.exe'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化一个driver，并且指定chromedriver的路径")]),t._v("\ndriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("driver_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求网页")]),t._v("\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.meowv.com/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 通过page_source获取网页源代码")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("page_source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])]),a("h2",{attrs:{id:"selenium-常用的操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selenium-常用的操作"}},[t._v("#")]),t._v(" selenium 常用的操作")]),t._v(" "),a("p",[t._v("官方文档："),a("a",{attrs:{href:"https://selenium-python.readthedocs.io/installation.html#introduction",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://selenium-python.readthedocs.io/installation.html#introduction"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"关闭页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关闭页面"}},[t._v("#")]),t._v(" 关闭页面")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("driver.close()")]),t._v("：关闭当前页面")]),t._v(" "),a("li",[a("code",[t._v("driver.quit()")]),t._v("：退出整个浏览器")])]),t._v(" "),a("h3",{attrs:{id:"定位元素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#定位元素"}},[t._v("#")]),t._v(" 定位元素")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("find_element_by_id")]),t._v("：根据id来查找某个元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element_by_class_name")]),t._v("：根据类名查找元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_class_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CLASS_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element_by_name")]),t._v("：根据name属性的值来查找元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'email'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'email'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element_by_tag_name")]),t._v("：根据标签名来查找元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_tag_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TAG_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element_by_xpath")]),t._v("：根据xpath语法来获取元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_xpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("XPATH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element_by_css_selector")]),t._v("：根据css选择器选择元素")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("submitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_css_selector"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CSS_SELECTOR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'//div'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("code",[t._v("find_element")]),t._v(" 是获取第一个满足条件的元素")]),t._v(" "),a("li",[a("code",[t._v("find_elements")]),t._v(" 是获取所有满足条件的元素")])]),t._v(" "),a("h3",{attrs:{id:"操作表单元素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#操作表单元素"}},[t._v("#")]),t._v(" 操作表单元素")]),t._v(" "),a("ul",[a("li",[t._v("操作输入框：分为两步。第一步：找到这个元素。第二步：使用"),a("code",[t._v("send_keys(value)")]),t._v("，将数据填充进去")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("inputTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kw'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ninputTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'python'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("使用"),a("code",[t._v("clear")]),t._v("方法可以清除输入框中的内容 "),a("code",[t._v("inputTag.clear()")])]),t._v(" "),a("ul",[a("li",[t._v("操作checkbox：因为要选中checkbox标签，在网页中是通过鼠标点击的。因此想要选中checkbox标签，那么先选中这个标签，然后执行click事件")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("rememberTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rememberMe"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nrememberTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[t._v("选择select：select元素不能直接点击。因为点击后还需要选中元素。这时候selenium就专门为select标签提供了一个类selenium.webdriver.support.ui.Select。将获取到的元素当成参数传到这个类中，创建这个对象。以后就可以使用这个对象进行选择了")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ui "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Select\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 选中这个标签，然后使用Select创建对象")]),t._v("\nselectTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Select"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"city-select"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据索引选择")]),t._v("\nselectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("select_by_index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据值选择")]),t._v("\nselectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("select_by_value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://news.hao123.com/wangzhi"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根据可视的文本选择")]),t._v("\nselectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("select_by_visible_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"上海"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 取消选中所有选项")]),t._v("\nselectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("deselect_all"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("ul",[a("li",[t._v("操作按钮：操作按钮有很多种方式。比如单击、右击、双击等。这里讲一个最常用的。就是点击。直接调用click函数就可以了")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("inputTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ninputTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h3",{attrs:{id:"行为链"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#行为链"}},[t._v("#")]),t._v(" 行为链")]),t._v(" "),a("p",[t._v("有时候在页面中的操作可能要有很多步，那么这时候可以使用鼠标行为链类ActionChains来完成。比如现在要将鼠标移动到某个元素上并执行点击事件")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("inputTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'kw'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nsubmitTag "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'su'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nactions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ActionChains"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("move_to_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send_keys_to_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("inputTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'python'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("move_to_element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("submitTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("click"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("submitTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nactions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("perform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("还有更多的鼠标相关的操作")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("click_and_hold(element)")]),t._v("：点击但不松开鼠标")]),t._v(" "),a("li",[a("code",[t._v("context_click(element)")]),t._v("：右键点击")]),t._v(" "),a("li",[a("code",[t._v("double_click(element)")]),t._v("：双击")]),t._v(" "),a("li",[t._v("更多方法请参考："),a("a",{attrs:{href:"http://selenium-python.readthedocs.io/api.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://selenium-python.readthedocs.io/api.html"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"cookie操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie操作"}},[t._v("#")]),t._v(" Cookie操作")]),t._v(" "),a("ul",[a("li",[t._v("获取所有的cookie")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" cookie "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("p",[t._v("-根据cookie的key获取value")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("删除所有的cookie：")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_all_cookies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("删除某个cookie：")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("delete_cookie"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"页面等待"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#页面等待"}},[t._v("#")]),t._v(" 页面等待")]),t._v(" "),a("p",[t._v("现在的网页越来越多采用了 Ajax 技术，这样程序便不能确定何时某个元素完全加载出来了。如果实际页面等待时间过长导致某个dom元素还没出来，但是你的代码直接使用了这个WebElement，那么就会抛出NullPointer的异常。为了解决这个问题。所以 selenium 提供了两种等待方式：一种是隐式等待、一种是显式等待。")]),t._v(" "),a("ul",[a("li",[t._v("隐式等待：调用driver.implicitly_wait。那么在获取不可用的元素之前，会先等待10秒中的时间。")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("driver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("driver_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 请求网页")]),t._v("\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://www.douban.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("ul",[a("li",[t._v("显示等待：显示等待是表明某个条件成立后才执行获取元素的操作。也可以在等待的时候指定一个最大的时间，如果超过这个时间那么就抛出一个异常。显示等待应该使用selenium.webdriver.support.excepted_conditions期望的条件和selenium.webdriver.support.ui.WebDriverWait来配合完成.")])]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ui "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" WebDriverWait\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" expected_conditions "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" EC\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("by "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" By\n\ndriver_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("r'D:\\Program Files\\chromedriver\\chromedriver.exe'")]),t._v("\ndriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("driver_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.douban.com/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("implicitly_wait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nelement "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" WebDriverWait"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("until"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    EC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("presence_of_element_located"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("By"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'phone'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br")])]),a("ul",[a("li",[t._v("一些其他的等待条件\n"),a("ul",[a("li",[a("code",[t._v("presence_of_element_located")]),t._v("：某个元素已经加载完毕了")]),t._v(" "),a("li",[a("code",[t._v("presence_of_all_emement_located")]),t._v("：网页中所有满足条件的元素都加载完毕了")]),t._v(" "),a("li",[a("code",[t._v("element_to_be_cliable")]),t._v("：某个元素是可以点击了")]),t._v(" "),a("li",[t._v("更多条件请参考："),a("a",{attrs:{href:"http://selenium-python.readthedocs.io/waits.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://selenium-python.readthedocs.io/waits.html"),a("OutboundLink")],1)])])])]),t._v(" "),a("h3",{attrs:{id:"切换页面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换页面"}},[t._v("#")]),t._v(" 切换页面")]),t._v(" "),a("p",[t._v("有时候窗口中有很多子tab页面。这时候肯定是需要进行切换的。selenium提供了一个叫做switch_to_window来进行切换，具体切换到哪个页面，可以从driver.window_handles中找到。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打开一个新的页面")]),t._v("\nself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("execute_script"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"window.open(\'"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\')"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 切换到这个新的页面中")]),t._v("\nself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("switch_to_window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("driver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("window_handles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"设置代理ip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置代理ip"}},[t._v("#")]),t._v(" 设置代理ip")]),t._v(" "),a("p",[t._v("有时候频繁爬取一些网页。服务器发现你是爬虫后会封掉你的ip地址。这时候我们可以更改代理ip。更改代理ip，不同的浏览器有不同的实现方式。这里以Chrome浏览器为例")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n\noptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\noptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"--proxy-server=http://132.232.126.92:8888"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndriver_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('r"D:\\Program Files\\chromedriver\\chromedriver.exe"')]),t._v("\ndriver "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("executable_path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("driver_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("chrome_options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ndriver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://httpbin.org/ip'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h3",{attrs:{id:"webelement元素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webelement元素"}},[t._v("#")]),t._v(" WebElement元素")]),t._v(" "),a("p",[t._v("from selenium.webdriver.remote.webelement import WebElement类是每个获取出来的元素的所属类，它有一些常用的属性")]),t._v(" "),a("ul",[a("li",[t._v("get_attribute：这个标签的某个属性的值")]),t._v(" "),a("li",[t._v("screentshot：获取当前页面的截图，这个方法只能在driver上使用，driver的对象类，是继承自WebElement")])])])}),[],!1,null,null,null);s.default=e.exports}}]);