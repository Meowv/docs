<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDB 常用命令 | 📖Documents</title>
    <meta name="generator" content="VuePress 1.5.3">
    <script>
        var _mtac = {"senseQuery":1};
        (function() {
            var mta = document.createElement("script");
            mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
            mta.setAttribute("name", "MTAH5");
            mta.setAttribute("sid", "500727760");
            mta.setAttribute("cid", "500727761");
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(mta, s);
        })();
        </script>
    <meta name="description" content="This is a personal document library for development work">
    <link rel="preload" href="/assets/css/0.styles.7cd537df.css" as="style"><link rel="preload" href="/assets/js/app.7f13a705.js" as="script"><link rel="preload" href="/assets/js/2.e3caa61b.js" as="script"><link rel="preload" href="/assets/js/75.9cb31918.js" as="script"><link rel="prefetch" href="/assets/js/10.59e185dc.js"><link rel="prefetch" href="/assets/js/11.28c9dbfa.js"><link rel="prefetch" href="/assets/js/12.3c5d5553.js"><link rel="prefetch" href="/assets/js/13.70769735.js"><link rel="prefetch" href="/assets/js/14.60ab21a1.js"><link rel="prefetch" href="/assets/js/15.e24be883.js"><link rel="prefetch" href="/assets/js/16.5a059047.js"><link rel="prefetch" href="/assets/js/17.de4804ab.js"><link rel="prefetch" href="/assets/js/18.e30e4fa1.js"><link rel="prefetch" href="/assets/js/19.3b2995db.js"><link rel="prefetch" href="/assets/js/20.c0b8de95.js"><link rel="prefetch" href="/assets/js/21.7fcfde60.js"><link rel="prefetch" href="/assets/js/22.d529874d.js"><link rel="prefetch" href="/assets/js/23.41ae11ad.js"><link rel="prefetch" href="/assets/js/24.3c08932e.js"><link rel="prefetch" href="/assets/js/25.53a6dbd3.js"><link rel="prefetch" href="/assets/js/26.e7d79d01.js"><link rel="prefetch" href="/assets/js/27.6777c255.js"><link rel="prefetch" href="/assets/js/28.fcfbc89b.js"><link rel="prefetch" href="/assets/js/29.f5fa0de9.js"><link rel="prefetch" href="/assets/js/3.b09601c6.js"><link rel="prefetch" href="/assets/js/30.473e9703.js"><link rel="prefetch" href="/assets/js/31.ce9f1d8e.js"><link rel="prefetch" href="/assets/js/32.0dd13b46.js"><link rel="prefetch" href="/assets/js/33.9c7079a2.js"><link rel="prefetch" href="/assets/js/34.60d625ee.js"><link rel="prefetch" href="/assets/js/35.34c946db.js"><link rel="prefetch" href="/assets/js/36.5c7fcc59.js"><link rel="prefetch" href="/assets/js/37.b177ef54.js"><link rel="prefetch" href="/assets/js/38.fb133f77.js"><link rel="prefetch" href="/assets/js/39.f1dcd20f.js"><link rel="prefetch" href="/assets/js/4.1624411d.js"><link rel="prefetch" href="/assets/js/40.7cae12cd.js"><link rel="prefetch" href="/assets/js/41.7f843fdc.js"><link rel="prefetch" href="/assets/js/42.1e891ee2.js"><link rel="prefetch" href="/assets/js/43.c1f82ce1.js"><link rel="prefetch" href="/assets/js/44.3ab74dfc.js"><link rel="prefetch" href="/assets/js/45.05ca04f9.js"><link rel="prefetch" href="/assets/js/46.f0e1e5be.js"><link rel="prefetch" href="/assets/js/47.db23e5fa.js"><link rel="prefetch" href="/assets/js/48.f008a2f1.js"><link rel="prefetch" href="/assets/js/49.1e0e273d.js"><link rel="prefetch" href="/assets/js/5.a1bf63ab.js"><link rel="prefetch" href="/assets/js/50.08507882.js"><link rel="prefetch" href="/assets/js/51.cb825d94.js"><link rel="prefetch" href="/assets/js/52.cc387276.js"><link rel="prefetch" href="/assets/js/53.2a9da021.js"><link rel="prefetch" href="/assets/js/54.2b0dd1f1.js"><link rel="prefetch" href="/assets/js/55.89a2f46d.js"><link rel="prefetch" href="/assets/js/56.913c7f9c.js"><link rel="prefetch" href="/assets/js/57.bdfbb16d.js"><link rel="prefetch" href="/assets/js/58.80e79f5e.js"><link rel="prefetch" href="/assets/js/59.ae5fe90d.js"><link rel="prefetch" href="/assets/js/6.756e00a9.js"><link rel="prefetch" href="/assets/js/60.cc85e9bb.js"><link rel="prefetch" href="/assets/js/61.94c06fcb.js"><link rel="prefetch" href="/assets/js/62.5743ea43.js"><link rel="prefetch" href="/assets/js/63.2b359d8a.js"><link rel="prefetch" href="/assets/js/64.7580ea1b.js"><link rel="prefetch" href="/assets/js/65.4a5ef7bc.js"><link rel="prefetch" href="/assets/js/66.7e346916.js"><link rel="prefetch" href="/assets/js/67.5857460f.js"><link rel="prefetch" href="/assets/js/68.23537f0b.js"><link rel="prefetch" href="/assets/js/69.6f66a0d3.js"><link rel="prefetch" href="/assets/js/7.cf639803.js"><link rel="prefetch" href="/assets/js/70.3aac5d1c.js"><link rel="prefetch" href="/assets/js/71.c4d73678.js"><link rel="prefetch" href="/assets/js/72.410c38ab.js"><link rel="prefetch" href="/assets/js/73.a28b948a.js"><link rel="prefetch" href="/assets/js/74.4acf982e.js"><link rel="prefetch" href="/assets/js/76.510f6857.js"><link rel="prefetch" href="/assets/js/77.c13c82d9.js"><link rel="prefetch" href="/assets/js/78.cf9f8c00.js"><link rel="prefetch" href="/assets/js/79.f764767d.js"><link rel="prefetch" href="/assets/js/8.803263f8.js"><link rel="prefetch" href="/assets/js/80.cd96e7f7.js"><link rel="prefetch" href="/assets/js/81.304d7038.js"><link rel="prefetch" href="/assets/js/82.de539799.js"><link rel="prefetch" href="/assets/js/83.de71a40f.js"><link rel="prefetch" href="/assets/js/84.0787261d.js"><link rel="prefetch" href="/assets/js/85.1dc87ade.js"><link rel="prefetch" href="/assets/js/86.9500b044.js"><link rel="prefetch" href="/assets/js/87.77e51a14.js"><link rel="prefetch" href="/assets/js/88.18adf06c.js"><link rel="prefetch" href="/assets/js/89.1271ad71.js"><link rel="prefetch" href="/assets/js/9.fbbfcec9.js"><link rel="prefetch" href="/assets/js/90.23bd1d82.js"><link rel="prefetch" href="/assets/js/91.c169863e.js"><link rel="prefetch" href="/assets/js/92.6d1e8db9.js"><link rel="prefetch" href="/assets/js/93.36abe7ee.js"><link rel="prefetch" href="/assets/js/94.281517dc.js"><link rel="prefetch" href="/assets/js/95.5de5eb4b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7cd537df.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">📖Documents</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚡系列文章" class="dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link">
  🚀基于 abp vNext 和 .NET Core 开发博客项目
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  🎈Python
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  🍺技术栈
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  🎉总结
</a></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    ⭐️GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚡系列文章" class="dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link">
  🚀基于 abp vNext 和 .NET Core 开发博客项目
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  🎈Python
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  🍺技术栈
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  🎉总结
</a></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    ⭐️GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>.NET Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blazor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Message Queue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Grafana</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Zabbix</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Storage</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Elasticsearch</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>MongoDB</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/stack/storage/mongodb/mongodb-shell.html" aria-current="page" class="active sidebar-link">MongoDB 常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#常用基本操作" class="sidebar-link">常用基本操作</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#collection聚集集合" class="sidebar-link">Collection聚集集合</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#数据的增删改查操作" class="sidebar-link">数据的增删改查操作</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#db-serverstatus-详解" class="sidebar-link">db.serverStatus()详解</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#权限管理" class="sidebar-link">权限管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#mongodb数据库用户角色" class="sidebar-link">mongodb数据库用户角色</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#创建用户" class="sidebar-link">创建用户</a></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#常用的用户命令" class="sidebar-link">常用的用户命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/stack/storage/mongodb/mongodb-shell.html#索引" class="sidebar-link">索引</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>SqlServer</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/stack/storage/sqlite/" class="sidebar-link">SQLite</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mongodb-常用命令"><a href="#mongodb-常用命令" class="header-anchor">#</a> MongoDB 常用命令</h1> <h2 id="常用基本操作"><a href="#常用基本操作" class="header-anchor">#</a> 常用基本操作</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 查看数据库列表</span>
show dbs

<span class="token comment"># 查看当前数据库</span>
db

<span class="token comment"># 新建一个表</span>
db.createCollection<span class="token punctuation">(</span><span class="token string">'要新建的表名'</span><span class="token punctuation">)</span>

<span class="token comment"># 查看当前数据库下的表</span>
show collections

<span class="token comment"># 删除当前数据库指定表</span>
db.表名.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 删除当前数据库</span>
db.dropDatabase<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 查看当前库的所有用户</span>
show <span class="token function">users</span>

<span class="token comment"># 删除当前使用数据库</span>
db.dropDatabase<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 将指定机器上的数据库的数据克隆到当前数据库</span>
db.cloneDatabase<span class="token punctuation">(</span>“127.0.0.1”<span class="token punctuation">)</span>

<span class="token comment"># 将本机的db的数据复制到temp数据库中</span>
db.copyDatabase<span class="token punctuation">(</span><span class="token string">&quot;db&quot;</span>, <span class="token string">&quot;temp&quot;</span>, <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">)</span>  
<span class="token comment"># 修复当前数据库</span>
db.repairDatabase<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 查看当前使用的数据库</span>
db.getName<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 显示当前db状态</span>
db.stats<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 当前db版本</span>
db.version<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 查看当前db的链接机器地址</span>
db.getMongo<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 查看当前的连接数</span>
db.serverStatus<span class="token punctuation">(</span><span class="token punctuation">)</span>.connections.current
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="collection聚集集合"><a href="#collection聚集集合" class="header-anchor">#</a> Collection聚集集合</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建一个聚集集合</span>
db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;collectionName&quot;</span>, <span class="token punctuation">{</span>size: <span class="token number">20</span>, capped: <span class="token number">5</span>, max: <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 得到指定名称的聚集集合</span>
db.getCollection<span class="token punctuation">(</span><span class="token string">&quot;account&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 得到当前db的所有聚集集合</span>
db.getCollectionNames<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 显示当前db所有聚集索引的状态</span>
db.printCollectionStats<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
<span class="token comment"># 查看聚集集合基本信息</span>

<span class="token comment"># 查看帮助</span>
db.yourColl.help<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查询当前集合的数据条数</span>
db.yourColl.count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查看数据空间大小</span>
db.userInfo.dataSize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 得到当前聚集集合所在的db</span>
db.userInfo.getDB<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 得到当前聚集的状态</span>
db.userInfo.stats<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 得到聚集集合总大小</span>
db.userInfo.totalSize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 聚集集合储存空间大小</span>
db.userInfo.storageSize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># Shard版本信息</span>
db.userInfo.getShardVersion<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 聚集集合重命名</span>
<span class="token comment"># 将userInfo重命名为users</span>
db.userInfo.renameCollection<span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 删除当前聚集集合</span>
db.userInfo.drop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="数据的增删改查操作"><a href="#数据的增删改查操作" class="header-anchor">#</a> 数据的增删改查操作</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 增：</span>
<span class="token comment"># 插入一条数据</span>
db.表名.insert<span class="token punctuation">(</span>数据<span class="token punctuation">)</span><span class="token punctuation">;</span>
db.test1.insertOne<span class="token punctuation">(</span>数据<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#insertOne只能插入1条数据</span>

<span class="token comment"># 插入多条数据</span>
db.表名.insert<span class="token punctuation">(</span><span class="token punctuation">[</span>数据1,数据2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db.表名.insertMany<span class="token punctuation">(</span><span class="token punctuation">[</span>数据1,数据2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># save</span>
db.表名.save<span class="token punctuation">(</span>数据<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># insert与save区别：</span>
<span class="token comment"># 当默认的“_id”值已存在时，调用insert方法插入会报错；而save方法不会,会更新相同的_id所在行数据的信息</span>

<span class="token comment"># 删</span>
db.表名.remove<span class="token punctuation">(</span>条件<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">#默认只删除第1条符合条件的数据</span>
db.表名.deleteOne<span class="token punctuation">(</span>条件<span class="token punctuation">)</span>

<span class="token comment"># 删除所有符合条件的数据</span>
db.表名.deleteMany<span class="token punctuation">(</span>条件<span class="token punctuation">)</span>

<span class="token comment"># 改</span>
db.表名.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;条件字段名&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;字段值&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;要修改的字段名&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;修改后的字段值&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 修改一条数据updateOne</span>
db.inventory.updateOne<span class="token punctuation">(</span>
   <span class="token punctuation">{</span> item: <span class="token string">&quot;paper&quot;</span> <span class="token punctuation">}</span>,
   <span class="token punctuation">{</span>
     <span class="token variable">$set</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;size.uom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;cm&quot;</span>, status: <span class="token string">&quot;P&quot;</span> <span class="token punctuation">}</span>,
     <span class="token variable">$currentDate</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> lastModified: <span class="token boolean">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment"># 修改多条数据updateMany</span>
db.inventory.updateMany<span class="token punctuation">(</span>
   <span class="token punctuation">{</span> <span class="token string">&quot;qty&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$lt</span><span class="token builtin class-name">:</span> <span class="token number">50</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>,
   <span class="token punctuation">{</span>
     <span class="token variable">$set</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token string">&quot;size.uom&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;in&quot;</span>, status: <span class="token string">&quot;P&quot;</span> <span class="token punctuation">}</span>,
     <span class="token variable">$currentDate</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span> lastModified: <span class="token boolean">true</span> <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment"># 替换replaceOne</span>
db.inventory.replaceOne<span class="token punctuation">(</span>
   <span class="token punctuation">{</span> item: <span class="token string">&quot;paper&quot;</span> <span class="token punctuation">}</span>,
   <span class="token punctuation">{</span> item: <span class="token string">&quot;paper&quot;</span>, instock: <span class="token punctuation">[</span> <span class="token punctuation">{</span> warehouse: <span class="token string">&quot;A&quot;</span>, qty: <span class="token number">60</span> <span class="token punctuation">}</span>, <span class="token punctuation">{</span> warehouse: <span class="token string">&quot;B&quot;</span>, qty: <span class="token number">40</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment"># 查</span>
db.表名.find<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># 查询表中所有数据</span>

db.表名.find<span class="token punctuation">(</span>条件<span class="token punctuation">)</span><span class="token comment"># 按条件查询</span>

db.表名.findOne<span class="token punctuation">(</span>条件<span class="token punctuation">)</span><span class="token comment"># 查询第一条(支持条件)</span>

db.表名.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span>数量<span class="token punctuation">)</span><span class="token comment"># 限制数量(分页)</span>

db.表名.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>数量<span class="token punctuation">)</span><span class="token comment"># 跳过指定数量</span>

db.表名.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span>起始数量<span class="token punctuation">)</span>.limit<span class="token punctuation">(</span>显示的数量<span class="token punctuation">)</span> <span class="token comment"># 如：显示从10开始的10条数据</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><h2 id="db-serverstatus-详解"><a href="#db-serverstatus-详解" class="header-anchor">#</a> db.serverStatus()详解</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">PRIMARY</span> <span class="token operator">&gt;</span> db<span class="token punctuation">.</span>serverStatus<span class="token punctuation">(</span><span class="token punctuation">)</span>
 {
    <span class="token string">&quot;host&quot;</span>: <span class="token string">&quot;cd9a511a2d0e&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">#主机名</span>
    <span class="token string">&quot;version&quot;</span>: <span class="token string">&quot;2.6.1&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">,</span>
    <span class="token comment">#版本号</span>
    <span class="token string">&quot;process&quot;</span>: <span class="token string">&quot;mongod&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">#进程名</span>
    <span class="token string">&quot;pid&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">41</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">#进程ID</span>
    <span class="token string">&quot;uptime&quot;</span>: <span class="token number">3785943</span><span class="token punctuation">,</span>
    <span class="token comment">#运行时间</span>
    <span class="token string">&quot;uptimeMillis&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;3785942955&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">&quot;uptimeEstimate&quot;</span>: <span class="token number">3755878</span><span class="token punctuation">,</span>
    <span class="token string">&quot;localTime&quot;</span>: ISODate<span class="token punctuation">(</span><span class="token string">&quot;2015-10-16T02:46:27.368Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">#当前时间</span>
    <span class="token string">&quot;asserts&quot;</span>: {
        <span class="token comment">#各个断言的数量</span>
        <span class="token string">&quot;regular&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;warning&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;msg&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;user&quot;</span>: <span class="token number">58</span><span class="token punctuation">,</span>
        <span class="token string">&quot;rollovers&quot;</span>: <span class="token number">0</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;backgroundFlushing&quot;</span>: {
        <span class="token string">&quot;flushes&quot;</span>: <span class="token number">63098</span><span class="token punctuation">,</span>
        <span class="token comment">#刷新次数</span>
        <span class="token string">&quot;total_ms&quot;</span>: <span class="token number">144997713</span><span class="token punctuation">,</span>
        <span class="token comment">#刷新花费总时间</span>
        <span class="token string">&quot;average_ms&quot;</span>: <span class="token number">2297.97637009097</span><span class="token punctuation">,</span>
        <span class="token comment">#平均时间</span>
        <span class="token string">&quot;last_ms&quot;</span>: <span class="token number">10913</span><span class="token punctuation">,</span>
        <span class="token comment">#最后一次时间</span>
        <span class="token string">&quot;last_finished&quot;</span>: ISODate<span class="token punctuation">(</span><span class="token string">&quot;2015-10-16T02:45:40.363Z&quot;</span><span class="token punctuation">)</span> <span class="token comment">#最后刷新时间</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;connections&quot;</span>: {
        <span class="token string">&quot;current&quot;</span>: <span class="token number">1444</span><span class="token punctuation">,</span>
        <span class="token comment">#当前连接数</span>
        <span class="token string">&quot;available&quot;</span>: <span class="token number">18556</span><span class="token punctuation">,</span>
        <span class="token comment">#可用连接数</span>
        <span class="token string">&quot;totalCreated&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">2429949</span><span class="token punctuation">)</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;cursors&quot;</span>: {
        <span class="token string">&quot;note&quot;</span>: <span class="token string">&quot;deprecated, use server status metrics&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;clientCursors_size&quot;</span>: <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token comment">#客户端游标大小</span>
        <span class="token string">&quot;totalOpen&quot;</span>: <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token comment">#打开游标数</span>
        <span class="token string">&quot;pinned&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;totalNoTimeout&quot;</span>: <span class="token number">481</span><span class="token punctuation">,</span>
        <span class="token string">&quot;timedOut&quot;</span>: <span class="token number">84</span> <span class="token comment">#超时时间</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;dur&quot;</span>: {
        <span class="token string">&quot;commits&quot;</span>: <span class="token number">27</span><span class="token punctuation">,</span>
        <span class="token string">&quot;journaledMB&quot;</span>: <span class="token number">2.711552</span><span class="token punctuation">,</span>
        <span class="token string">&quot;writeToDataFilesMB&quot;</span>: <span class="token number">5.213888</span><span class="token punctuation">,</span>
        <span class="token string">&quot;compression&quot;</span>: <span class="token number">0.5158220112430492</span><span class="token punctuation">,</span>
        <span class="token string">&quot;commitsInWriteLock&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;earlyCommits&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;timeMs&quot;</span>: {
            <span class="token string">&quot;dt&quot;</span>: <span class="token number">3003</span><span class="token punctuation">,</span>
            <span class="token string">&quot;prepLogBuffer&quot;</span>: <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token string">&quot;writeToJournal&quot;</span>: <span class="token number">228</span><span class="token punctuation">,</span>
            <span class="token string">&quot;writeToDataFiles&quot;</span>: <span class="token number">10</span><span class="token punctuation">,</span>
            <span class="token string">&quot;remapPrivateView&quot;</span>: <span class="token number">2</span>
        }
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;extra_info&quot;</span>: {
        <span class="token string">&quot;note&quot;</span>: <span class="token string">&quot;fields vary by platform&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;heap_usage_bytes&quot;</span>: <span class="token number">96529464</span><span class="token punctuation">,</span>
        <span class="token comment">#堆使用情况（字节）</span>
        <span class="token string">&quot;page_faults&quot;</span>: <span class="token number">11253067</span> <span class="token comment">#页面故障数</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;globalLock&quot;</span>: {
        <span class="token string">&quot;totalTime&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;3785942955000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;lockTime&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;47441423960&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;currentQueue&quot;</span>: {
            <span class="token string">&quot;total&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">&quot;readers&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">&quot;writers&quot;</span>: <span class="token number">0</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;activeClients&quot;</span>: {
            <span class="token string">&quot;total&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">&quot;readers&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token string">&quot;writers&quot;</span>: <span class="token number">0</span>
        }
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;indexCounters&quot;</span>: {
        <span class="token string">&quot;accesses&quot;</span>: <span class="token number">5980339643</span><span class="token punctuation">,</span>
        <span class="token comment">#索引被访问数</span>
        <span class="token string">&quot;hits&quot;</span>: <span class="token number">5980339322</span><span class="token punctuation">,</span>
        <span class="token comment">#索引命中数</span>
        <span class="token string">&quot;misses&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token comment">#索引偏差数</span>
        <span class="token string">&quot;resets&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token comment">#复位数</span>
        <span class="token string">&quot;mi***atio&quot;</span>: <span class="token number">0</span> <span class="token comment">#未命中率</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;locks&quot;</span>: {
        <span class="token string">&quot;.&quot;</span>: {
            <span class="token string">&quot;timeLockedMicros&quot;</span>: {
                <span class="token string">&quot;R&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">1300731481</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;W&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;47441423960&quot;</span><span class="token punctuation">)</span>
            }<span class="token punctuation">,</span>
            <span class="token string">&quot;timeAcquiringMicros&quot;</span>: {
                <span class="token string">&quot;R&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;83350794378&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;W&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;8842280365&quot;</span><span class="token punctuation">)</span>
            }
        }<span class="token punctuation">,</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;network&quot;</span>: {
        <span class="token string">&quot;bytesIn&quot;</span>: <span class="token number">182494603618</span><span class="token punctuation">,</span>
        <span class="token comment">#输入数据（byte）</span>
        <span class="token string">&quot;bytesOut&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;2936449550300&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">#输出数据（byte）</span>
        <span class="token string">&quot;numRequests&quot;</span>: <span class="token number">600302443</span> <span class="token comment">#请求数</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;opcounters&quot;</span>: {
        <span class="token string">&quot;insert&quot;</span>: <span class="token number">214538892</span><span class="token punctuation">,</span>
        <span class="token comment">#插入操作数</span>
        <span class="token string">&quot;query&quot;</span>: <span class="token number">388689</span><span class="token punctuation">,</span>
        <span class="token comment">#查询操作数</span>
        <span class="token string">&quot;update&quot;</span>: <span class="token number">3462611</span><span class="token punctuation">,</span>
        <span class="token comment">#更新操作数</span>
        <span class="token string">&quot;delete&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">,</span>
        <span class="token comment">#删除操作数</span>
        <span class="token string">&quot;getmore&quot;</span>: <span class="token number">188590632</span><span class="token punctuation">,</span>
        <span class="token comment">#获取更多的操作数</span>
        <span class="token string">&quot;command&quot;</span>: <span class="token number">197825527</span> <span class="token comment">#其他命令操作数</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;opcountersRepl&quot;</span>: {
        <span class="token string">&quot;insert&quot;</span>: <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;query&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;update&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;delete&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;getmore&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token string">&quot;command&quot;</span>: <span class="token number">0</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;recordStats&quot;</span>: {
        <span class="token string">&quot;accessesNotInMemory&quot;</span>: <span class="token number">8377141</span><span class="token punctuation">,</span>
        <span class="token string">&quot;pageFaultExceptionsThrown&quot;</span>: <span class="token number">2926497</span><span class="token punctuation">,</span>
        <span class="token string">&quot;admin&quot;</span>: {
            <span class="token string">&quot;accessesNotInMemory&quot;</span>: <span class="token number">94</span><span class="token punctuation">,</span>
            <span class="token string">&quot;pageFaultExceptionsThrown&quot;</span>: <span class="token number">0</span>
        }
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;repl&quot;</span>: {
        <span class="token comment">#复制情况</span>
        <span class="token string">&quot;setName&quot;</span>: <span class="token string">&quot;c562ca6c-1d72-4c6a-a943-b46fe87e47ca&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;setVersion&quot;</span>: <span class="token number">105039</span><span class="token punctuation">,</span>
        <span class="token string">&quot;ismaster&quot;</span>: <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;secondary&quot;</span>: <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token string">&quot;hosts&quot;</span>: <span class="token punctuation">[</span>
            <span class="token string">&quot;10.10.1.1:27017&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;10.10.1.2:27017&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;arbiters&quot;</span>: <span class="token punctuation">[</span>
            <span class="token string">&quot;10.10.1.2:27017&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string">&quot;primary&quot;</span>: <span class="token string">&quot;10.10.1.4:27017&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;me&quot;</span>: <span class="token string">&quot;10.10.1.5:27017&quot;</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;writeBacksQueued&quot;</span>: <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string">&quot;mem&quot;</span>: {
        <span class="token comment">#内存情况</span>
        <span class="token string">&quot;bits&quot;</span>: <span class="token number">64</span><span class="token punctuation">,</span>
        <span class="token comment">#64位操作系统</span>
        <span class="token string">&quot;resident&quot;</span>: <span class="token number">4430</span><span class="token punctuation">,</span>
        <span class="token comment">#占有物理内存数</span>
        <span class="token string">&quot;virtual&quot;</span>: <span class="token number">813370</span><span class="token punctuation">,</span>
        <span class="token comment">#占有虚拟内存数</span>
        <span class="token string">&quot;supported&quot;</span>: <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token comment">#是否支持内存扩展</span>
        <span class="token string">&quot;mapped&quot;</span>: <span class="token number">405498</span><span class="token punctuation">,</span>
        <span class="token string">&quot;mappedWithJournal&quot;</span>: <span class="token number">810996</span>
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;metrics&quot;</span>: {
        <span class="token string">&quot;cursor&quot;</span>: {
            <span class="token string">&quot;timedOut&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;open&quot;</span>: {
                <span class="token string">&quot;noTimeout&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">481</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;pinned&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;total&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            }
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;document&quot;</span>: {
            <span class="token string">&quot;deleted&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;inserted&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">214538892</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;returned&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token string">&quot;6735629965&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;updated&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">6502807</span><span class="token punctuation">)</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;getLastError&quot;</span>: {
            <span class="token string">&quot;wtime&quot;</span>: {
                <span class="token string">&quot;num&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token string">&quot;totalMillis&quot;</span>: <span class="token number">0</span>
            }<span class="token punctuation">,</span>
            <span class="token string">&quot;wtimeouts&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;operation&quot;</span>: {
            <span class="token string">&quot;fastmod&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">3483995</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;idhack&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">39</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;scanAndOrder&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;queryExecutor&quot;</span>: {
            <span class="token string">&quot;scanned&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">107218344</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;scannedObjects&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">107217952</span><span class="token punctuation">)</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;record&quot;</span>: {
            <span class="token string">&quot;moves&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">1604</span><span class="token punctuation">)</span>
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;repl&quot;</span>: {
            <span class="token string">&quot;apply&quot;</span>: {
                <span class="token string">&quot;batches&quot;</span>: {
                    <span class="token string">&quot;num&quot;</span>: <span class="token number">2</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;totalMillis&quot;</span>: <span class="token number">8</span>
                }<span class="token punctuation">,</span>
                <span class="token string">&quot;ops&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            }<span class="token punctuation">,</span>
            <span class="token string">&quot;buffer&quot;</span>: {
                <span class="token string">&quot;count&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;maxSizeBytes&quot;</span>: <span class="token number">268435456</span><span class="token punctuation">,</span>
                <span class="token string">&quot;sizeBytes&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
            }<span class="token punctuation">,</span>
            <span class="token string">&quot;network&quot;</span>: {
                <span class="token string">&quot;bytes&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">709</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;getmores&quot;</span>: {
                    <span class="token string">&quot;num&quot;</span>: <span class="token number">18</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;totalMillis&quot;</span>: <span class="token number">86108</span>
                }<span class="token punctuation">,</span>
                <span class="token string">&quot;ops&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">&quot;readersCreated&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span>
            }<span class="token punctuation">,</span>
            <span class="token string">&quot;preload&quot;</span>: {
                <span class="token string">&quot;docs&quot;</span>: {
                    <span class="token string">&quot;num&quot;</span>: <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;totalMillis&quot;</span>: <span class="token number">0</span>
                }<span class="token punctuation">,</span>
                <span class="token string">&quot;indexes&quot;</span>: {
                    <span class="token string">&quot;num&quot;</span>: <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;totalMillis&quot;</span>: <span class="token number">0</span>
                }
            }
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;storage&quot;</span>: {
            <span class="token string">&quot;freelist&quot;</span>: {
                <span class="token string">&quot;search&quot;</span>: {
                    <span class="token string">&quot;bucketExhausted&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;requests&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">6551285</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token string">&quot;scanned&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">12001208</span><span class="token punctuation">)</span>
                }
            }
        }<span class="token punctuation">,</span>
        <span class="token string">&quot;ttl&quot;</span>: {
            <span class="token string">&quot;deletedDocuments&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token string">&quot;passes&quot;</span>: NumberLong<span class="token punctuation">(</span><span class="token number">63048</span><span class="token punctuation">)</span>
        }
    }<span class="token punctuation">,</span>
    <span class="token string">&quot;ok&quot;</span>: <span class="token number">1</span>
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br></div></div><h2 id="权限管理"><a href="#权限管理" class="header-anchor">#</a> 权限管理</h2> <h3 id="mongodb数据库用户角色"><a href="#mongodb数据库用户角色" class="header-anchor">#</a> mongodb数据库用户角色</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 数据库用户角色</span>
read：允许用户读取指定数据库
readWrite：允许用户读写指定数据库

<span class="token comment"># 数据库管理员角色</span>
dbAdmin：允许用户进行索引创建、删除，查看统计或访问system.profile，但没有角色和用户管理的权限
userAdmin：提供了在当前数据库中创建和修改角色和用户的能力
dbOwner： 提供对数据库执行任何管理操作的能力。这个角色组合了readWrite、dbAdmin和userAdmin角色授予的特权。

<span class="token comment"># 集群管理角色</span>
clusterAdmin ： 提供最强大的集群管理访问。组合clusterManager、clusterMonitor和hostManager角色的能力。还提供了dropDatabase操作
clusterManager ： 在集群上提供管理和监视操作。可以访问配置和本地数据库，这些数据库分别用于分片和复制
clusterMonitor ： 提供对监控工具的只读访问，例如MongoDB云管理器和Ops管理器监控代理。
hostManager ： 提供监视和管理服务器的能力。

<span class="token comment"># 备份恢复角色</span>
backup ： 提供备份数据所需的能力，使用MongoDB云管理器备份代理、Ops管理器备份代理或使用mongodump
restore ： 提供使用mongorestore恢复数据所需的能力

<span class="token comment"># 所有数据库角色</span>
readAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限
readWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限
userAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限
dbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限。

<span class="token comment"># 超级用户角色</span>
root：提供对readWriteAnyDatabase、dbAdminAnyDatabase、userAdminAnyDatabase、clusterAdmin、restore和backup的所有资源的访问
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="创建用户"><a href="#创建用户" class="header-anchor">#</a> 创建用户</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#创建超级管理员</span>
use admin
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>
    user:<span class="token string">&quot;admin&quot;</span>,
    pwd:<span class="token string">&quot;123456&quot;</span>,
    roles:<span class="token punctuation">[</span><span class="token punctuation">{</span>
        role:<span class="token string">&quot;root&quot;</span>,
        db:<span class="token string">&quot;admin&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#创建普通用户</span>
<span class="token comment">#创建test用户，密码为123456，权限为testDB数据库的readWrite权限</span>
use testDB <span class="token comment">#进入testDB数据库</span>
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>user:<span class="token string">'test'</span>,pwd:<span class="token string">'123456'</span>,roles:<span class="token punctuation">[</span><span class="token punctuation">{</span>role:<span class="token string">'readWrite'</span>,db:<span class="token string">'testDB'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">#修改密码</span>
db.updateUser<span class="token punctuation">(</span><span class="token string">'test'</span>,<span class="token punctuation">{</span>user:<span class="token string">'test'</span>,pwd:<span class="token string">'admin'</span>,roles:<span class="token punctuation">[</span><span class="token punctuation">{</span>role:<span class="token string">'read'</span>,db:<span class="token string">'testDB'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  //修改密码 并且 //修改角色为只读
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="常用的用户命令"><a href="#常用的用户命令" class="header-anchor">#</a> 常用的用户命令</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#添加一个用户</span>
db.addUser<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db.addUser<span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span>, <span class="token string">&quot;pwd123&quot;</span>, <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 添加用户、设置密码、是否只读

<span class="token comment">#数据库认证、安全模式</span>
db.auth<span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span>, <span class="token string">&quot;123123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#查看所有用户</span>
 show <span class="token function">users</span><span class="token punctuation">;</span>
<span class="token comment">#删除用户</span>
 db.removeUser<span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 创建索引</span>
db.userInfo.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>name: <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db.userInfo.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span>name: <span class="token number">1</span>, ts: -1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查询当前聚集集合所有索引</span>
db.userInfo.getIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查看总索引记录大小</span>
db.userInfo.totalIndexSize<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 读取当前集合的所有index信息</span>
db.users.reIndex<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 删除指定索引</span>
db.users.dropIndex<span class="token punctuation">(</span><span class="token string">&quot;index_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 删除所有索引索引</span>
db.users.dropIndexes<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/meowv/docs/edit/master//stack/storage/mongodb/mongodb-shell.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">16 hours ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/stack/storage/redis/quick-start-with-redis.html" class="prev">
        Redis快速入门及使用
      </a></span> <span class="next"><a href="/stack/storage/sql/query.html">
        SqlServer 常用查询语句
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.7f13a705.js" defer></script><script src="/assets/js/2.e3caa61b.js" defer></script><script src="/assets/js/75.9cb31918.js" defer></script>
  </body>
</html>
