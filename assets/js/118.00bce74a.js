(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{722:function(a,e,s){"use strict";s.r(e);var t=s(2),r=Object(t.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"volume-定义匿名卷"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#volume-定义匿名卷"}},[a._v("#")]),a._v(" VOLUME 定义匿名卷")]),a._v(" "),e("p",[a._v("格式为：")]),a._v(" "),e("ul",[e("li",[e("code",[a._v('VOLUME ["<路径1>", "<路径2>"...]')])]),a._v(" "),e("li",[e("code",[a._v("VOLUME <路径>")])])]),a._v(" "),e("p",[a._v("之前我们说过，容器运行时应该尽量保持容器存储层不发生写操作，对于数据库类需要保存动态数据的应用，其数据库文件应该保存于卷(volume)中，后面的章节我们会进一步介绍 Docker 卷的概念。为了防止运行时用户忘记将动态文件所保存目录挂载为卷，在 "),e("code",[a._v("Dockerfile")]),a._v(" 中，我们可以事先指定某些目录挂载为匿名卷，这样在运行时如果用户不指定挂载，其应用也可以正常运行，不会向容器存储层写入大量数据。")]),a._v(" "),e("div",{staticClass:"language-docker line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("VOLUME")]),a._v(" /data")]),a._v("\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("这里的 "),e("code",[a._v("/data")]),a._v(" 目录就会在运行时自动挂载为匿名卷，任何向 "),e("code",[a._v("/data")]),a._v(" 中写入的信息都不会记录进容器存储层，从而保证了容器存储层的无状态化。当然，运行时可以覆盖这个挂载设置。比如：")]),a._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" mydata:/data xxxx\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("在这行命令中，就使用了 "),e("code",[a._v("mydata")]),a._v(" 这个命名卷挂载到了 "),e("code",[a._v("/data")]),a._v(" 这个位置，替代了 "),e("code",[a._v("Dockerfile")]),a._v(" 中定义的匿名卷的挂载配置。")])])}),[],!1,null,null,null);e.default=r.exports}}]);