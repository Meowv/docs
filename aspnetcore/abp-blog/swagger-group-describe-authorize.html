<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>再说Swagger，分组、描述、小绿锁 | 📖Documents</title>
    <meta name="generator" content="VuePress 1.5.4">
    <script>
        var _mtac = {"senseQuery":1};
        (function() {
            var mta = document.createElement("script");
            mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";
            mta.setAttribute("name", "MTAH5");
            mta.setAttribute("sid", "500727760");
            mta.setAttribute("cid", "500727761");
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(mta, s);
        })();
        </script>
    <meta name="description" content="This is a personal document library for development work">
    <link rel="preload" href="/assets/css/0.styles.715b4171.css" as="style"><link rel="preload" href="/assets/js/app.7a26c7a3.js" as="script"><link rel="preload" href="/assets/js/2.e68b31a2.js" as="script"><link rel="preload" href="/assets/js/15.f4bb74d9.js" as="script"><link rel="prefetch" href="/assets/js/10.f6402c44.js"><link rel="prefetch" href="/assets/js/100.ca033072.js"><link rel="prefetch" href="/assets/js/101.dd97e637.js"><link rel="prefetch" href="/assets/js/102.66e6255a.js"><link rel="prefetch" href="/assets/js/103.dd5b77b6.js"><link rel="prefetch" href="/assets/js/104.1f69eea2.js"><link rel="prefetch" href="/assets/js/105.922904a0.js"><link rel="prefetch" href="/assets/js/106.e7891303.js"><link rel="prefetch" href="/assets/js/107.cea16886.js"><link rel="prefetch" href="/assets/js/108.6a34d8fb.js"><link rel="prefetch" href="/assets/js/109.421488dd.js"><link rel="prefetch" href="/assets/js/11.2e9c07d5.js"><link rel="prefetch" href="/assets/js/110.c5fb248d.js"><link rel="prefetch" href="/assets/js/111.d39eca25.js"><link rel="prefetch" href="/assets/js/112.eedbf865.js"><link rel="prefetch" href="/assets/js/113.6a110344.js"><link rel="prefetch" href="/assets/js/114.5f783a7c.js"><link rel="prefetch" href="/assets/js/115.651879a7.js"><link rel="prefetch" href="/assets/js/116.fea09639.js"><link rel="prefetch" href="/assets/js/117.eea98970.js"><link rel="prefetch" href="/assets/js/118.519d5f47.js"><link rel="prefetch" href="/assets/js/119.b365592d.js"><link rel="prefetch" href="/assets/js/12.980e4443.js"><link rel="prefetch" href="/assets/js/120.c4df9601.js"><link rel="prefetch" href="/assets/js/121.e0eca38a.js"><link rel="prefetch" href="/assets/js/122.e6466434.js"><link rel="prefetch" href="/assets/js/123.7e6d1574.js"><link rel="prefetch" href="/assets/js/124.4bf57389.js"><link rel="prefetch" href="/assets/js/125.e4902c2d.js"><link rel="prefetch" href="/assets/js/126.18720e42.js"><link rel="prefetch" href="/assets/js/127.92b83499.js"><link rel="prefetch" href="/assets/js/128.11bf6392.js"><link rel="prefetch" href="/assets/js/129.28e9f3d6.js"><link rel="prefetch" href="/assets/js/13.07878d52.js"><link rel="prefetch" href="/assets/js/130.11b9d774.js"><link rel="prefetch" href="/assets/js/131.da1d66f2.js"><link rel="prefetch" href="/assets/js/132.c96fc781.js"><link rel="prefetch" href="/assets/js/133.7afbda14.js"><link rel="prefetch" href="/assets/js/134.3bc99b62.js"><link rel="prefetch" href="/assets/js/135.f96cc8df.js"><link rel="prefetch" href="/assets/js/136.23683e0b.js"><link rel="prefetch" href="/assets/js/137.01ae0ad0.js"><link rel="prefetch" href="/assets/js/138.d1f42df5.js"><link rel="prefetch" href="/assets/js/139.153d789a.js"><link rel="prefetch" href="/assets/js/14.e8822c87.js"><link rel="prefetch" href="/assets/js/140.13c60053.js"><link rel="prefetch" href="/assets/js/141.ad945bdf.js"><link rel="prefetch" href="/assets/js/142.0b60219c.js"><link rel="prefetch" href="/assets/js/143.dd5ebfa7.js"><link rel="prefetch" href="/assets/js/144.03e08151.js"><link rel="prefetch" href="/assets/js/145.628b6a90.js"><link rel="prefetch" href="/assets/js/146.a85deb31.js"><link rel="prefetch" href="/assets/js/147.9754959c.js"><link rel="prefetch" href="/assets/js/148.21372915.js"><link rel="prefetch" href="/assets/js/149.c6b7d8d1.js"><link rel="prefetch" href="/assets/js/150.d0deddd5.js"><link rel="prefetch" href="/assets/js/151.a06a5b1c.js"><link rel="prefetch" href="/assets/js/152.452e8b86.js"><link rel="prefetch" href="/assets/js/153.6833d53e.js"><link rel="prefetch" href="/assets/js/154.0653ba3b.js"><link rel="prefetch" href="/assets/js/155.87abb4b7.js"><link rel="prefetch" href="/assets/js/156.9c4b074e.js"><link rel="prefetch" href="/assets/js/157.b49c72f8.js"><link rel="prefetch" href="/assets/js/158.88f28c73.js"><link rel="prefetch" href="/assets/js/159.e0f36357.js"><link rel="prefetch" href="/assets/js/16.e341cf62.js"><link rel="prefetch" href="/assets/js/160.b8a05cb0.js"><link rel="prefetch" href="/assets/js/161.eb5dd924.js"><link rel="prefetch" href="/assets/js/162.93c57a58.js"><link rel="prefetch" href="/assets/js/163.cc1cee69.js"><link rel="prefetch" href="/assets/js/164.c6bf341e.js"><link rel="prefetch" href="/assets/js/165.f57f8ecb.js"><link rel="prefetch" href="/assets/js/166.4dbe3620.js"><link rel="prefetch" href="/assets/js/167.9585eeee.js"><link rel="prefetch" href="/assets/js/168.c39b8bcd.js"><link rel="prefetch" href="/assets/js/169.e10145fc.js"><link rel="prefetch" href="/assets/js/17.070e18bb.js"><link rel="prefetch" href="/assets/js/170.58c47969.js"><link rel="prefetch" href="/assets/js/171.33965de9.js"><link rel="prefetch" href="/assets/js/172.e78f0d32.js"><link rel="prefetch" href="/assets/js/173.0f79084b.js"><link rel="prefetch" href="/assets/js/174.6b099177.js"><link rel="prefetch" href="/assets/js/175.f9fe3ef1.js"><link rel="prefetch" href="/assets/js/176.a4559cf4.js"><link rel="prefetch" href="/assets/js/177.e836f8d5.js"><link rel="prefetch" href="/assets/js/178.2b9c5f7f.js"><link rel="prefetch" href="/assets/js/179.b113a4ec.js"><link rel="prefetch" href="/assets/js/18.0085a8d6.js"><link rel="prefetch" href="/assets/js/180.ec7a1a38.js"><link rel="prefetch" href="/assets/js/181.86856429.js"><link rel="prefetch" href="/assets/js/182.39a70d09.js"><link rel="prefetch" href="/assets/js/183.4e5c9cdf.js"><link rel="prefetch" href="/assets/js/184.54dc8eb7.js"><link rel="prefetch" href="/assets/js/185.216f3c14.js"><link rel="prefetch" href="/assets/js/186.e2f3f6b9.js"><link rel="prefetch" href="/assets/js/187.fa62b15c.js"><link rel="prefetch" href="/assets/js/188.bcfb5927.js"><link rel="prefetch" href="/assets/js/189.8fd48f6c.js"><link rel="prefetch" href="/assets/js/19.08c3cd29.js"><link rel="prefetch" href="/assets/js/190.c6072ef9.js"><link rel="prefetch" href="/assets/js/191.ddf9a06b.js"><link rel="prefetch" href="/assets/js/192.29bfb98e.js"><link rel="prefetch" href="/assets/js/193.dca725dd.js"><link rel="prefetch" href="/assets/js/194.ade6bfcd.js"><link rel="prefetch" href="/assets/js/195.a58caa63.js"><link rel="prefetch" href="/assets/js/196.0bc6dfd5.js"><link rel="prefetch" href="/assets/js/197.391def1e.js"><link rel="prefetch" href="/assets/js/198.d3455d52.js"><link rel="prefetch" href="/assets/js/199.7a7b599a.js"><link rel="prefetch" href="/assets/js/20.dd1262f2.js"><link rel="prefetch" href="/assets/js/200.749405ec.js"><link rel="prefetch" href="/assets/js/201.c8af9150.js"><link rel="prefetch" href="/assets/js/202.c7f1c21f.js"><link rel="prefetch" href="/assets/js/203.6644ebcb.js"><link rel="prefetch" href="/assets/js/204.e801e0a2.js"><link rel="prefetch" href="/assets/js/205.fcefd1a1.js"><link rel="prefetch" href="/assets/js/206.3491a9c9.js"><link rel="prefetch" href="/assets/js/207.5028cd10.js"><link rel="prefetch" href="/assets/js/208.9263821d.js"><link rel="prefetch" href="/assets/js/209.46d0527d.js"><link rel="prefetch" href="/assets/js/21.f8703067.js"><link rel="prefetch" href="/assets/js/210.3388d099.js"><link rel="prefetch" href="/assets/js/211.45887011.js"><link rel="prefetch" href="/assets/js/212.8d87742d.js"><link rel="prefetch" href="/assets/js/213.3b6c94b9.js"><link rel="prefetch" href="/assets/js/214.3e4bee00.js"><link rel="prefetch" href="/assets/js/215.f09ccaf8.js"><link rel="prefetch" href="/assets/js/216.42939bc7.js"><link rel="prefetch" href="/assets/js/217.de4b853f.js"><link rel="prefetch" href="/assets/js/218.05e6945c.js"><link rel="prefetch" href="/assets/js/219.488ddd96.js"><link rel="prefetch" href="/assets/js/22.6c7f794e.js"><link rel="prefetch" href="/assets/js/220.b602552f.js"><link rel="prefetch" href="/assets/js/23.3e2da241.js"><link rel="prefetch" href="/assets/js/24.50ba0b2b.js"><link rel="prefetch" href="/assets/js/25.79a3f513.js"><link rel="prefetch" href="/assets/js/26.a3089571.js"><link rel="prefetch" href="/assets/js/27.473d62b9.js"><link rel="prefetch" href="/assets/js/28.fd2892e8.js"><link rel="prefetch" href="/assets/js/29.41946570.js"><link rel="prefetch" href="/assets/js/3.d463c54e.js"><link rel="prefetch" href="/assets/js/30.9604b1f3.js"><link rel="prefetch" href="/assets/js/31.4c31fde5.js"><link rel="prefetch" href="/assets/js/32.7b06e097.js"><link rel="prefetch" href="/assets/js/33.8767555a.js"><link rel="prefetch" href="/assets/js/34.8a820610.js"><link rel="prefetch" href="/assets/js/35.1f29b259.js"><link rel="prefetch" href="/assets/js/36.c367dbff.js"><link rel="prefetch" href="/assets/js/37.315a2fe6.js"><link rel="prefetch" href="/assets/js/38.d3d85f39.js"><link rel="prefetch" href="/assets/js/39.eea8e0dc.js"><link rel="prefetch" href="/assets/js/4.f3f73101.js"><link rel="prefetch" href="/assets/js/40.ddc06066.js"><link rel="prefetch" href="/assets/js/41.72b3811f.js"><link rel="prefetch" href="/assets/js/42.e1976ef3.js"><link rel="prefetch" href="/assets/js/43.8e50db77.js"><link rel="prefetch" href="/assets/js/44.a25353ed.js"><link rel="prefetch" href="/assets/js/45.d9395dac.js"><link rel="prefetch" href="/assets/js/46.459a6d98.js"><link rel="prefetch" href="/assets/js/47.20e9e918.js"><link rel="prefetch" href="/assets/js/48.f3bd8a76.js"><link rel="prefetch" href="/assets/js/49.248224bc.js"><link rel="prefetch" href="/assets/js/5.c31d0dec.js"><link rel="prefetch" href="/assets/js/50.27d74c4f.js"><link rel="prefetch" href="/assets/js/51.550798ac.js"><link rel="prefetch" href="/assets/js/52.b9319241.js"><link rel="prefetch" href="/assets/js/53.d31dc843.js"><link rel="prefetch" href="/assets/js/54.5143149b.js"><link rel="prefetch" href="/assets/js/55.7365b7f3.js"><link rel="prefetch" href="/assets/js/56.a33a1df3.js"><link rel="prefetch" href="/assets/js/57.da41cad7.js"><link rel="prefetch" href="/assets/js/58.f46481d8.js"><link rel="prefetch" href="/assets/js/59.ef020f74.js"><link rel="prefetch" href="/assets/js/6.40b20efb.js"><link rel="prefetch" href="/assets/js/60.76f07d76.js"><link rel="prefetch" href="/assets/js/61.47ddba72.js"><link rel="prefetch" href="/assets/js/62.49e74afd.js"><link rel="prefetch" href="/assets/js/63.6df70448.js"><link rel="prefetch" href="/assets/js/64.deb00430.js"><link rel="prefetch" href="/assets/js/65.f0ebab61.js"><link rel="prefetch" href="/assets/js/66.9ab77f82.js"><link rel="prefetch" href="/assets/js/67.018ac4ed.js"><link rel="prefetch" href="/assets/js/68.c1b9ec5b.js"><link rel="prefetch" href="/assets/js/69.4c6b2576.js"><link rel="prefetch" href="/assets/js/7.07de1a3f.js"><link rel="prefetch" href="/assets/js/70.83e9bea6.js"><link rel="prefetch" href="/assets/js/71.3559fe93.js"><link rel="prefetch" href="/assets/js/72.a3cb1736.js"><link rel="prefetch" href="/assets/js/73.9ff25636.js"><link rel="prefetch" href="/assets/js/74.cf689fd5.js"><link rel="prefetch" href="/assets/js/75.56395c2d.js"><link rel="prefetch" href="/assets/js/76.dbe6a740.js"><link rel="prefetch" href="/assets/js/77.a2e02b6d.js"><link rel="prefetch" href="/assets/js/78.81f4b1a1.js"><link rel="prefetch" href="/assets/js/79.05d5567d.js"><link rel="prefetch" href="/assets/js/8.91f54060.js"><link rel="prefetch" href="/assets/js/80.6a478b7a.js"><link rel="prefetch" href="/assets/js/81.91c42fbd.js"><link rel="prefetch" href="/assets/js/82.6a9e06fd.js"><link rel="prefetch" href="/assets/js/83.c5e5ca7c.js"><link rel="prefetch" href="/assets/js/84.435e7820.js"><link rel="prefetch" href="/assets/js/85.328e328f.js"><link rel="prefetch" href="/assets/js/86.9ea8e02c.js"><link rel="prefetch" href="/assets/js/87.47872b68.js"><link rel="prefetch" href="/assets/js/88.fe66ef1d.js"><link rel="prefetch" href="/assets/js/89.7834348b.js"><link rel="prefetch" href="/assets/js/9.b10a11ac.js"><link rel="prefetch" href="/assets/js/90.75bd8ec0.js"><link rel="prefetch" href="/assets/js/91.213ad811.js"><link rel="prefetch" href="/assets/js/92.59a324a5.js"><link rel="prefetch" href="/assets/js/93.432679e5.js"><link rel="prefetch" href="/assets/js/94.7afb59c2.js"><link rel="prefetch" href="/assets/js/95.1a296c10.js"><link rel="prefetch" href="/assets/js/96.76310bb6.js"><link rel="prefetch" href="/assets/js/97.fe72e837.js"><link rel="prefetch" href="/assets/js/98.237a02c8.js"><link rel="prefetch" href="/assets/js/99.89ee0d52.js">
    <link rel="stylesheet" href="/assets/css/0.styles.715b4171.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">📖Documents</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚡系列文章" class="dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚡系列文章" class="mobile-dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link router-link-active">
  🚀基于 abp vNext 和 .NET Core 开发博客项目
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  🎈Python
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  🍺技术栈
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  🎉总结
</a></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    ⭐️GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⚡系列文章" class="dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="⚡系列文章" class="mobile-dropdown-title"><span class="title">⚡系列文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link router-link-active">
  🚀基于 abp vNext 和 .NET Core 开发博客项目
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  🎈Python
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  🍺技术栈
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  🎉总结
</a></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    ⭐️GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/aspnetcore/abp-blog/abp-cli.html" class="sidebar-link">使用 abp cli 搭建项目</a></li><li><a href="/aspnetcore/abp-blog/slim-and-run.html" class="sidebar-link">给项目瘦身，让它跑起来</a></li><li><a href="/aspnetcore/abp-blog/beautify-with-swagger.html" class="sidebar-link">完善与美化，Swagger登场</a></li><li><a href="/aspnetcore/abp-blog/ef-and-codefirst.html" class="sidebar-link">数据访问和代码优先</a></li><li><a href="/aspnetcore/abp-blog/repositories-and-crud.html" class="sidebar-link">自定义仓储之增删改查</a></li><li><a href="/aspnetcore/abp-blog/return-api.html" class="sidebar-link">统一规范API，包装返回模型</a></li><li><a href="/aspnetcore/abp-blog/swagger-group-describe-authorize.html" aria-current="page" class="active sidebar-link">再说Swagger，分组、描述、小绿锁</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/aspnetcore/abp-blog/swagger-group-describe-authorize.html#分组" class="sidebar-link">分组</a></li><li class="sidebar-sub-header"><a href="/aspnetcore/abp-blog/swagger-group-describe-authorize.html#描述" class="sidebar-link">描述</a></li><li class="sidebar-sub-header"><a href="/aspnetcore/abp-blog/swagger-group-describe-authorize.html#小绿锁" class="sidebar-link">小绿锁</a></li></ul></li><li><a href="/aspnetcore/abp-blog/generate-jwt-with-github.html" class="sidebar-link">接入GitHub，用JWT保护你的API</a></li><li><a href="/aspnetcore/abp-blog/exception-and-logging.html" class="sidebar-link">异常处理和日志记录</a></li><li><a href="/aspnetcore/abp-blog/use-redis-cachedatas.html" class="sidebar-link">使用Redis缓存数据</a></li><li><a href="/aspnetcore/abp-blog/task-processing-with-hangfire.html" class="sidebar-link">集成Hangfire实现定时任务处理</a></li><li><a href="/aspnetcore/abp-blog/object-mapping-with-automapper.html" class="sidebar-link">用AutoMapper搞定对象映射</a></li><li><a href="/aspnetcore/abp-blog/task-processing-bestpractice-1.html" class="sidebar-link">定时任务最佳实战（一）</a></li><li><a href="/aspnetcore/abp-blog/task-processing-bestpractice-2.html" class="sidebar-link">定时任务最佳实战（二）</a></li><li><a href="/aspnetcore/abp-blog/task-processing-bestpractice-3.html" class="sidebar-link">定时任务最佳实战（三）</a></li><li><a href="/aspnetcore/abp-blog/blog-api-bestpractice-1.html" class="sidebar-link">博客接口实战篇（一）</a></li><li><a href="/aspnetcore/abp-blog/blog-api-bestpractice-2.html" class="sidebar-link">博客接口实战篇（二）</a></li><li><a href="/aspnetcore/abp-blog/blog-api-bestpractice-3.html" class="sidebar-link">博客接口实战篇（三）</a></li><li><a href="/aspnetcore/abp-blog/blog-api-bestpractice-4.html" class="sidebar-link">博客接口实战篇（四）</a></li><li><a href="/aspnetcore/abp-blog/blog-api-bestpractice-5.html" class="sidebar-link">博客接口实战篇（五）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-1.html" class="sidebar-link">Blazor 实战系列（一）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-2.html" class="sidebar-link">Blazor 实战系列（二）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-3.html" class="sidebar-link">Blazor 实战系列（三）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-4.html" class="sidebar-link">Blazor 实战系列（四）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-5.html" class="sidebar-link">Blazor 实战系列（五）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-6.html" class="sidebar-link">Blazor 实战系列（六）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-7.html" class="sidebar-link">Blazor 实战系列（七）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-8.html" class="sidebar-link">Blazor 实战系列（八）</a></li><li><a href="/aspnetcore/abp-blog/blazor-bestpractice-9.html" class="sidebar-link">Blazor 实战系列（九）</a></li><li><a href="/aspnetcore/abp-blog/publish-blog.html" class="sidebar-link">终结篇之发布项目</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="再说swagger-分组、描述、小绿锁"><a href="#再说swagger-分组、描述、小绿锁" class="header-anchor">#</a> 再说Swagger，分组、描述、小绿锁</h1> <p>在开始本篇正文之前，解决一个 @疯疯过 指出的错误，再次感谢指正。</p> <p><img src="/assets/img/swagger-group-describe-authorize-01.97a40d9e.png" alt=" "></p> <p>步骤如下：</p> <ul><li>删掉<code>.Domain.Shared</code>层中的项目引用，添加nuget依赖包<code>Volo.Abp.Identity.Domain.Shared</code>，可以使用命令：<code>Install-Package Volo.Abp.Identity.Domain.Shared</code></li> <li>在<code>.Domain</code>层中引用项目<code>.Domain.Shared</code>，在模块类中添加依赖<code>typeof(MeowvBlogDomainSharedModule)</code></li> <li>将<code>.EntityFrameworkCore</code>层中的引用项目<code>.Domain.Shared</code>改成<code>.Domain</code>。</li></ul> <p><img src="/assets/img/swagger-group-describe-authorize-02.61aaae47.png" alt=" "></p> <hr> <p>上一篇文章完成了对API返回模型的封装，紧接着我打算继续来折腾一下Swagger，之前的文章中已经简单用起了Swagger，本篇还是围绕它让其发挥更高的更多的价值。</p> <p>当我们的项目不断壮大，API持续增多，这时如果想要快速准确定位到某个API可能不是那么容易，需要翻半天才能找对我们的API。于是对Swagger API文档分组和详细的文档描述就有必要了，就本项目而言，博客系统可以分组为：博客前台接口、博客后台接口、其它公共接口、JWT认证授权接口。</p> <p>其中，博客后台组中的接口需要授权后才可以调用，需要授权那么就涉及到身份验证，在这里准备采用JWT(JSON WEB TOKEN)的方式进行。</p> <h2 id="分组"><a href="#分组" class="header-anchor">#</a> 分组</h2> <p>对Swagger进行分组很简单，在<code>.Swagger</code>层中的扩展方法<code>AddSwagger(this IServiceCollection services)</code>中多次调用<code>options.SwaggerDoc(...)</code>即可，像这样</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
    options<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v1&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
    <span class="token punctuation">{</span>
        Version <span class="token operator">=</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
        Title <span class="token operator">=</span> <span class="token string">&quot;我的接口啊1&quot;</span><span class="token punctuation">,</span>
        Description <span class="token operator">=</span> <span class="token string">&quot;接口描述1&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    options<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span><span class="token string">&quot;v2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
    <span class="token punctuation">{</span>
        Version <span class="token operator">=</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
        Title <span class="token operator">=</span> <span class="token string">&quot;我的接口啊2&quot;</span><span class="token punctuation">,</span>
        Description <span class="token operator">=</span> <span class="token string">&quot;接口描述2&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>不过这样显得有点low，然后可以转变一下思路使用遍历的方式进行。<code>options.SwaggerDoc(...)</code>接收两个参数：<code>string name, OpenApiInfo info</code>。</p> <p><code>name</code>：可以理解为当前分组的前缀；<code>OpenApiInfo</code>：有许多可配置的参数，在这里我只用到三个，<code>Version</code>、<code>Title</code>、<code>Description</code>。</p> <p>要注意，当在<code>AddSwagger(...)</code>中调用完后，还需要在我们的扩展方法<code>UseSwaggerUI(this IApplicationBuilder app)</code>中<code>options.SwaggerEndpoint()</code>使用它，同样的也用遍历的方法。它接收的的参数：<code>string url, string name</code>。</p> <p><code>url</code>：这里的<code>url</code>要与前面配置的<code>name</code>参数对应。</p> <p><code>name</code>：我们自定义显示的分组名称。</p> <p>于是可以直接在扩展方法中新建一个内部类：<code>SwaggerApiInfo</code></p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerApiInfo</span>
        <span class="token punctuation">{</span>
            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// URL前缀</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> UrlPrefix <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// 名称</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// &lt;see cref=&quot;Microsoft.OpenApi.Models.OpenApiInfo&quot;/&gt;</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token return-type class-name">OpenApiInfo</span> OpenApiInfo <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>然后新建一个<code>List&lt;SwaggerApiInfo&gt;</code>手动为其初始化一些值。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
       <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// Swagger分组信息，将进行遍历使用</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>SwaggerApiInfo<span class="token punctuation">&gt;</span></span> ApiInfos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>SwaggerApiInfo<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SwaggerApiInfo</span>
            <span class="token punctuation">{</span>
                UrlPrefix <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v1<span class="token punctuation">,</span>
                Name <span class="token operator">=</span> <span class="token string">&quot;博客前台接口&quot;</span><span class="token punctuation">,</span>
                OpenApiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
                <span class="token punctuation">{</span>
                    Version <span class="token operator">=</span> version<span class="token punctuation">,</span>
                    Title <span class="token operator">=</span> <span class="token string">&quot;阿星Plus - 博客前台接口&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> description
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SwaggerApiInfo</span>
            <span class="token punctuation">{</span>
                UrlPrefix <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v2<span class="token punctuation">,</span>
                Name <span class="token operator">=</span> <span class="token string">&quot;博客后台接口&quot;</span><span class="token punctuation">,</span>
                OpenApiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
                <span class="token punctuation">{</span>
                    Version <span class="token operator">=</span> version<span class="token punctuation">,</span>
                    Title <span class="token operator">=</span> <span class="token string">&quot;阿星Plus - 博客后台接口&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> description
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SwaggerApiInfo</span>
            <span class="token punctuation">{</span>
                UrlPrefix <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v3<span class="token punctuation">,</span>
                Name <span class="token operator">=</span> <span class="token string">&quot;通用公共接口&quot;</span><span class="token punctuation">,</span>
                OpenApiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
                <span class="token punctuation">{</span>
                    Version <span class="token operator">=</span> version<span class="token punctuation">,</span>
                    Title <span class="token operator">=</span> <span class="token string">&quot;阿星Plus - 通用公共接口&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> description
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SwaggerApiInfo</span>
            <span class="token punctuation">{</span>
                UrlPrefix <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v4<span class="token punctuation">,</span>
                Name <span class="token operator">=</span> <span class="token string">&quot;JWT授权接口&quot;</span><span class="token punctuation">,</span>
                OpenApiInfo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiInfo</span>
                <span class="token punctuation">{</span>
                    Version <span class="token operator">=</span> version<span class="token punctuation">,</span>
                    Title <span class="token operator">=</span> <span class="token string">&quot;阿星Plus - JWT授权接口&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> description
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p><code>version</code>：我们将其配置在<code>appsettings.json</code>中，做到动态可以修改。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//AppSettings.cs</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// ApiVersion</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ApiVersion <span class="token operator">=&gt;</span> _config<span class="token punctuation">[</span><span class="token string">&quot;ApiVersion&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>

<span class="token comment">//appsettings.json</span>
<span class="token punctuation">{</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
  <span class="token string">&quot;ApiVersion&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;1.0.0&quot;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>description</code>：因为多次使用，就定义一个变量，内容自拟主要是一些介绍性的描述，将在Swagger界面进行显示。</p> <p><code>UrlPrefix</code>：分别为，v1,v2,v3,v4。在<code>Domain.Shared</code>层中为其定义好常量</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//MeowvBlogConsts.cs</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// 分组</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Grouping</span>
        <span class="token punctuation">{</span>
            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// 博客前台接口组</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> GroupName_v1 <span class="token operator">=</span> <span class="token string">&quot;v1&quot;</span><span class="token punctuation">;</span>

            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// 博客后台接口组</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> GroupName_v2 <span class="token operator">=</span> <span class="token string">&quot;v2&quot;</span><span class="token punctuation">;</span>

            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// 其他通用接口组</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> GroupName_v3 <span class="token operator">=</span> <span class="token string">&quot;v3&quot;</span><span class="token punctuation">;</span>

            <span class="token comment">/// &lt;summary&gt;</span>
            <span class="token comment">/// JWT授权接口组</span>
            <span class="token comment">/// &lt;/summary&gt;</span>
            <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token class-name"><span class="token keyword">string</span></span> GroupName_v4 <span class="token operator">=</span> <span class="token string">&quot;v4&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>现在修改扩展方法<code>AddSwagger(...)</code>，遍历<code>List&lt;SwaggerApiInfo&gt;</code>。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddSwagger</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token comment">//options.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo</span>
                <span class="token comment">//{</span>
                <span class="token comment">//    Version = &quot;1.0.0&quot;,</span>
                <span class="token comment">//    Title = &quot;我的接口啊&quot;,</span>
                <span class="token comment">//    Description = &quot;接口描述&quot;</span>
                <span class="token comment">//});</span>

                <span class="token comment">// 遍历并应用Swagger分组信息</span>
                ApiInfos<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    options<span class="token punctuation">.</span><span class="token function">SwaggerDoc</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>UrlPrefix<span class="token punctuation">,</span> x<span class="token punctuation">.</span>OpenApiInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token range operator">..</span><span class="token punctuation">.</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>在扩展方法<code>UseSwaggerUI(...)</code>使用，通用也需要遍历。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token comment">// 遍历分组信息，生成Json</span>
        ApiInfos<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
                options<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;/swagger/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">x<span class="token punctuation">.</span>UrlPrefix</span><span class="token punctuation">}</span></span><span class="token string">/swagger.json&quot;</span></span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>细心的同学可以发现，我们前几篇文章打开Swagger文档的时候都是需要手动更改URL地址：<code>.../swagger</code>才能正确进入，其实Swagger是支持配置路由的。同时咱们也将页面Title也给改了吧。看下面<code>UseSwaggerUI(...)</code>完整代码：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// UseSwaggerUI</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token comment">/// &lt;param name=&quot;app&quot;&gt;&lt;/param&gt;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">UseSwaggerUI</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// 遍历分组信息，生成Json</span>
                ApiInfos<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span>
                <span class="token punctuation">{</span>
                    options<span class="token punctuation">.</span><span class="token function">SwaggerEndpoint</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$&quot;/swagger/</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">x<span class="token punctuation">.</span>UrlPrefix</span><span class="token punctuation">}</span></span><span class="token string">/swagger.json&quot;</span></span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// 模型的默认扩展深度，设置为 -1 完全隐藏模型</span>
                options<span class="token punctuation">.</span><span class="token function">DefaultModelsExpandDepth</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// API文档仅展开标记</span>
                options<span class="token punctuation">.</span><span class="token function">DocExpansion</span><span class="token punctuation">(</span>DocExpansion<span class="token punctuation">.</span>List<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// API前缀设置为空</span>
                options<span class="token punctuation">.</span>RoutePrefix <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span>Empty<span class="token punctuation">;</span>
                <span class="token comment">// API页面Title</span>
                options<span class="token punctuation">.</span>DocumentTitle <span class="token operator">=</span> <span class="token string">&quot;😍接口文档 - 阿星Plus⭐⭐⭐&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><code>options.DefaultModelsExpandDepth(-1);</code>是模型的默认扩展深度，设置为 -1 完全隐藏模型。</p> <p><code>options.DocExpansion(DocExpansion.List);</code>代表API文档仅展开标记，不默然展开所有接口，需要我们手动去点击才展开，可以自行查看<code>DocExpansion</code>。</p> <p><code>options.RoutePrefix = string.Empty;</code>代表路由设置为空，直接打开页面就可以访问了。</p> <p><code>options.DocumentTitle = &quot;😍接口文档 - 阿星Plus⭐⭐⭐&quot;;</code>是设置文档页面的标题的。</p> <p>完成以上操作，在Controller中使用 Attribute：<code>[ApiExplorerSettings(GroupName = ...)]</code>指定是哪个分组然后就可以愉快的使用了。</p> <p>默认不指定的话就是全部都有，目前只有两个Controller，我们将<code>HelloWorldController</code>设置成v3，<code>BlogController</code>设置成v1。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//HelloWorldController.cs</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiExplorerSettings</span><span class="token attribute-arguments"><span class="token punctuation">(</span>GroupName <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v3<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbpController</span></span>
    <span class="token punctuation">{</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>

<span class="token comment">//BlogController.cs</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiExplorerSettings</span><span class="token attribute-arguments"><span class="token punctuation">(</span>GroupName <span class="token operator">=</span> Grouping<span class="token punctuation">.</span>GroupName_v1<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BlogController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">AbpController</span></span>
    <span class="token punctuation">{</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>编译运行，打开我们的Swagger文档看一下。</p> <p><img src="/assets/img/swagger-group-describe-authorize-03.2e084b3c.png" alt=" "></p> <p><img src="/assets/img/swagger-group-describe-authorize-04.6cedb20c.png" alt=" "></p> <p>自己试着换切换一下分组试试吧，大功告成。​</p> <h2 id="描述"><a href="#描述" class="header-anchor">#</a> 描述</h2> <p>在Swagger文档中，默认只显示我们的Controller的名称，其实他也是支持描述信息的，这是就需要我们自行扩展了。在<code>.Swagger</code>层新建一个文件夹Filters，添加<code>SwaggerDocumentFilter</code>类来实现IDocumentFilter接口。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token comment">//SwaggerDocumentFilter.cs</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>OpenApi<span class="token punctuation">.</span>Models</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Swashbuckle<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>SwaggerGen</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">Meowv<span class="token punctuation">.</span>Blog<span class="token punctuation">.</span>Swagger<span class="token punctuation">.</span>Filters</span>
<span class="token punctuation">{</span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// 对应Controller的API文档描述信息</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SwaggerDocumentFilter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IDocumentFilter</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Apply</span><span class="token punctuation">(</span><span class="token class-name">OpenApiDocument</span> swaggerDoc<span class="token punctuation">,</span> <span class="token class-name">DocumentFilterContext</span> context<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> tags <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>OpenApiTag<span class="token punctuation">&gt;</span></span>
            <span class="token punctuation">{</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiTag</span> <span class="token punctuation">{</span>
                    Name <span class="token operator">=</span> <span class="token string">&quot;Blog&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> <span class="token string">&quot;个人博客相关接口&quot;</span><span class="token punctuation">,</span>
                    ExternalDocs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiExternalDocs</span> <span class="token punctuation">{</span> Description <span class="token operator">=</span> <span class="token string">&quot;包含：文章/标签/分类/友链&quot;</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiTag</span> <span class="token punctuation">{</span>
                    Name <span class="token operator">=</span> <span class="token string">&quot;HelloWorld&quot;</span><span class="token punctuation">,</span>
                    Description <span class="token operator">=</span> <span class="token string">&quot;通用公共接口&quot;</span><span class="token punctuation">,</span>
                    ExternalDocs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiExternalDocs</span> <span class="token punctuation">{</span> Description <span class="token operator">=</span> <span class="token string">&quot;这里是一些通用的公共接口&quot;</span> <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>

            <span class="token comment">// 按照Name升序排序</span>
            swaggerDoc<span class="token punctuation">.</span>Tags <span class="token operator">=</span> tags<span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>Name<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>实现<code>Apply(...)</code>方法后，使用Linq语法对文档排个序，然后最重要的使用这个Filter，在扩展方法<code>AddSwagger(...)</code>中使用</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddSwagger</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token range operator">..</span><span class="token punctuation">.</span>
                <span class="token comment">// 应用Controller的API文档描述信息</span>
                options<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DocumentFilter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SwaggerDocumentFilter<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>再打开Swagger文档看看效果。</p> <p><img src="/assets/img/swagger-group-describe-authorize-05.7cc0d345.png" alt=" "></p> <p>ok，此时描述信息也出来了。</p> <h2 id="小绿锁"><a href="#小绿锁" class="header-anchor">#</a> 小绿锁</h2> <p>在Swagger文档中开启小绿锁是非常简单的，只需添加一个包：<code>Swashbuckle.AspNetCore.Filters</code>，直接使用命令安装：<code>Install-Package Swashbuckle.AspNetCore.Filters</code></p> <p>然后再扩展方法<code>AddSwagger(this IServiceCollection services)</code>中调用</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddSwagger</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> services<span class="token punctuation">.</span><span class="token function">AddSwaggerGen</span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
        <span class="token class-name"><span class="token keyword">var</span></span> security <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiSecurityScheme</span>
        <span class="token punctuation">{</span>
            Description <span class="token operator">=</span> <span class="token string">&quot;JWT模式授权，请输入 Bearer {Token} 进行身份验证&quot;</span><span class="token punctuation">,</span>
            Name <span class="token operator">=</span> <span class="token string">&quot;Authorization&quot;</span><span class="token punctuation">,</span>
            In <span class="token operator">=</span> ParameterLocation<span class="token punctuation">.</span>Header<span class="token punctuation">,</span>
            Type <span class="token operator">=</span> SecuritySchemeType<span class="token punctuation">.</span>ApiKey
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">AddSecurityDefinition</span><span class="token punctuation">(</span><span class="token string">&quot;oauth2&quot;</span><span class="token punctuation">,</span> security<span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token function">AddSecurityRequirement</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">OpenApiSecurityRequirement</span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> security<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OperationFilter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AddResponseHeadersFilter<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OperationFilter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>AppendAuthorizeToSummaryOperationFilter<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        options<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OperationFilter</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>SecurityRequirementsOperationFilter<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>以上便实现了在Swagger文档中显示小绿锁，我们new的<code>OpenApiSecurityScheme</code>对象，具体参数大家可以自行看一下注释就明白具体含义。分别调用<code>options.AddSecurityDefinition(...)</code>、<code>options.AddSecurityRequiremen(...)</code>、<code>options.OperationFilter(...)</code>，编译运行，打开瞅瞅。</p> <p><img src="/assets/img/swagger-group-describe-authorize-06.89df0bb7.png" alt=" "></p> <p>现在只是做了小绿锁的显示，但是并没有实际意义，因为在.net core中还需要配置我们的身份认证授权代码，才能具体发挥其真正的作用，所以目前我们的api还是处于裸奔状态，谁都能调用你的api，等你发现你写的文章都被别人删了，你都不知道为什么。</p> <p>实现JWT，将在下篇文章中详细说明，本篇到这里就结束了，我们完善了Swagger文档，给接口加了分组、描述，还有小绿锁。老铁，你学会了吗？😁😁😁</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/meowv/docs/edit/master//aspnetcore/abp-blog/swagger-group-describe-authorize.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">6 days ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/aspnetcore/abp-blog/return-api.html" class="prev">
        统一规范API，包装返回模型
      </a></span> <span class="next"><a href="/aspnetcore/abp-blog/generate-jwt-with-github.html">
        接入GitHub，用JWT保护你的API
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.7a26c7a3.js" defer></script><script src="/assets/js/2.e68b31a2.js" defer></script><script src="/assets/js/15.f4bb74d9.js" defer></script>
  </body>
</html>
