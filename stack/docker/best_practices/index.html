<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dockerfile æœ€ä½³å®è·µ | ğŸ“–Documents</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script>var _mtac = {"senseQuery":1};(function() { var mta = document.createElement("script");mta.src = "//pingjs.qq.com/h5/stats.js?v2.0.4";mta.setAttribute("name", "MTAH5");mta.setAttribute("sid", "500727760");mta.setAttribute("cid", "500727761");var s = document.getElementsByTagName("script")[0];s.parentNode.insertBefore(mta, s); })();</script>
    <script src="/live2d/L2Dwidget.min.js"></script>
    <script>
        const models = [
            '/live2d/live2d-widget-model-epsilon2_1/assets/Epsilon2.1.model.json',
            '/live2d/live2d-widget-model-haru/01/assets/haru01.model.json',
            '/live2d/live2d-widget-model-haru/02/assets/haru02.model.json',
            '/live2d/live2d-widget-model-haruto/assets/haruto.model.json',
            '/live2d/live2d-widget-model-koharu/assets/koharu.model.json',
            '/live2d/live2d-widget-model-hijiki/assets/hijiki.model.json',
            '/live2d/live2d-widget-model-tororo/assets/tororo.model.json',
            '/live2d/live2d-widget-model-izumi/assets/izumi.model.json',
            '/live2d/live2d-widget-model-miku/assets/miku.model.json',
            '/live2d/live2d-widget-model-shizuku/assets/shizuku.model.json',
            '/live2d/live2d-widget-model-wanko/assets/wanko.model.json',
            '/live2d/live2d-widget-model-z16/assets/z16.model.json'
        ];
        L2Dwidget.init({
            "model": {
                jsonPath: models[parseInt(Math.random() * (models.length))]
            },
            "display": {
                "position": "left",
                "width": 150,
                "height": 210,
                "hOffset": 5,
                "vOffset": 5,
                "superSample": 1,
            },
            "mobile": {
                "scale": 1,
                "show": true,
                "motion": true,
            },
            "react": {
                "opacityDefault": .5,
                "opacityOnHover": .2
            }
        });
    </script>
    <meta name="description" content="This is a personal document library for development work">
    
    <link rel="preload" href="/assets/css/0.styles.74392c83.css" as="style"><link rel="preload" href="/assets/js/app.31cd6076.js" as="script"><link rel="preload" href="/assets/js/2.887f4612.js" as="script"><link rel="preload" href="/assets/js/102.2c376caa.js" as="script"><link rel="prefetch" href="/assets/js/10.df51912d.js"><link rel="prefetch" href="/assets/js/100.0214024c.js"><link rel="prefetch" href="/assets/js/101.75bd76dc.js"><link rel="prefetch" href="/assets/js/103.efdb3398.js"><link rel="prefetch" href="/assets/js/104.796fa62d.js"><link rel="prefetch" href="/assets/js/105.bbd0e684.js"><link rel="prefetch" href="/assets/js/106.5be1968a.js"><link rel="prefetch" href="/assets/js/107.4bfa6bf6.js"><link rel="prefetch" href="/assets/js/108.f138f5a1.js"><link rel="prefetch" href="/assets/js/109.7ae00b21.js"><link rel="prefetch" href="/assets/js/11.6bf74099.js"><link rel="prefetch" href="/assets/js/110.811757cf.js"><link rel="prefetch" href="/assets/js/111.08273f66.js"><link rel="prefetch" href="/assets/js/112.6689d146.js"><link rel="prefetch" href="/assets/js/113.cf53df91.js"><link rel="prefetch" href="/assets/js/114.03bcf0cf.js"><link rel="prefetch" href="/assets/js/115.ebd76fc6.js"><link rel="prefetch" href="/assets/js/116.dffcb2a1.js"><link rel="prefetch" href="/assets/js/117.196d2728.js"><link rel="prefetch" href="/assets/js/118.12081a8c.js"><link rel="prefetch" href="/assets/js/119.3c8f9081.js"><link rel="prefetch" href="/assets/js/12.49b541ed.js"><link rel="prefetch" href="/assets/js/120.c01d347a.js"><link rel="prefetch" href="/assets/js/121.12b070f2.js"><link rel="prefetch" href="/assets/js/122.1e3dcd76.js"><link rel="prefetch" href="/assets/js/123.375760da.js"><link rel="prefetch" href="/assets/js/124.408bb92e.js"><link rel="prefetch" href="/assets/js/125.b6857052.js"><link rel="prefetch" href="/assets/js/126.edcee02c.js"><link rel="prefetch" href="/assets/js/127.f22b21b4.js"><link rel="prefetch" href="/assets/js/128.230afb73.js"><link rel="prefetch" href="/assets/js/129.67213f02.js"><link rel="prefetch" href="/assets/js/13.223ebe0d.js"><link rel="prefetch" href="/assets/js/130.c0b032aa.js"><link rel="prefetch" href="/assets/js/131.c3b7be4b.js"><link rel="prefetch" href="/assets/js/132.9abfa51c.js"><link rel="prefetch" href="/assets/js/133.6f89e55b.js"><link rel="prefetch" href="/assets/js/134.cbeb7ed8.js"><link rel="prefetch" href="/assets/js/135.12cbdd0b.js"><link rel="prefetch" href="/assets/js/136.a1814b87.js"><link rel="prefetch" href="/assets/js/137.c5a13fad.js"><link rel="prefetch" href="/assets/js/138.dc1f5a5d.js"><link rel="prefetch" href="/assets/js/139.ea4ae533.js"><link rel="prefetch" href="/assets/js/14.ee4732e9.js"><link rel="prefetch" href="/assets/js/140.ab962a63.js"><link rel="prefetch" href="/assets/js/141.41766a82.js"><link rel="prefetch" href="/assets/js/142.7adda441.js"><link rel="prefetch" href="/assets/js/143.5e8de722.js"><link rel="prefetch" href="/assets/js/144.33ae4014.js"><link rel="prefetch" href="/assets/js/145.474cc26e.js"><link rel="prefetch" href="/assets/js/146.c35ff3b0.js"><link rel="prefetch" href="/assets/js/147.d489a7d1.js"><link rel="prefetch" href="/assets/js/148.99121e7d.js"><link rel="prefetch" href="/assets/js/149.3790e6a2.js"><link rel="prefetch" href="/assets/js/15.b9a06bbe.js"><link rel="prefetch" href="/assets/js/150.d6eede24.js"><link rel="prefetch" href="/assets/js/151.bac458d5.js"><link rel="prefetch" href="/assets/js/152.cc5877b1.js"><link rel="prefetch" href="/assets/js/153.d25f9597.js"><link rel="prefetch" href="/assets/js/154.98b55de5.js"><link rel="prefetch" href="/assets/js/155.5845a8c7.js"><link rel="prefetch" href="/assets/js/156.6bad30ea.js"><link rel="prefetch" href="/assets/js/157.4bcffaf6.js"><link rel="prefetch" href="/assets/js/158.ea8f7145.js"><link rel="prefetch" href="/assets/js/159.a81be4eb.js"><link rel="prefetch" href="/assets/js/16.d16b9a59.js"><link rel="prefetch" href="/assets/js/160.a6a872be.js"><link rel="prefetch" href="/assets/js/161.233f7ab7.js"><link rel="prefetch" href="/assets/js/162.32c04418.js"><link rel="prefetch" href="/assets/js/163.32c772d5.js"><link rel="prefetch" href="/assets/js/164.f72d61ef.js"><link rel="prefetch" href="/assets/js/165.bae81bbc.js"><link rel="prefetch" href="/assets/js/166.9cd5bd44.js"><link rel="prefetch" href="/assets/js/167.5a76c816.js"><link rel="prefetch" href="/assets/js/168.fcad22a5.js"><link rel="prefetch" href="/assets/js/169.1ed9d4f3.js"><link rel="prefetch" href="/assets/js/17.7b89a89f.js"><link rel="prefetch" href="/assets/js/170.37d86448.js"><link rel="prefetch" href="/assets/js/171.12ff7a39.js"><link rel="prefetch" href="/assets/js/172.268194db.js"><link rel="prefetch" href="/assets/js/173.b2eb0d51.js"><link rel="prefetch" href="/assets/js/174.a95ab6b8.js"><link rel="prefetch" href="/assets/js/175.13ce776e.js"><link rel="prefetch" href="/assets/js/176.9b034779.js"><link rel="prefetch" href="/assets/js/177.733c0dd5.js"><link rel="prefetch" href="/assets/js/178.cf9b16a6.js"><link rel="prefetch" href="/assets/js/179.c6691f19.js"><link rel="prefetch" href="/assets/js/18.6c9692d4.js"><link rel="prefetch" href="/assets/js/180.69763192.js"><link rel="prefetch" href="/assets/js/181.ed5972a8.js"><link rel="prefetch" href="/assets/js/182.c5365279.js"><link rel="prefetch" href="/assets/js/183.9118401b.js"><link rel="prefetch" href="/assets/js/184.dd597d04.js"><link rel="prefetch" href="/assets/js/185.dcaee5c8.js"><link rel="prefetch" href="/assets/js/186.2f65c143.js"><link rel="prefetch" href="/assets/js/187.489ee437.js"><link rel="prefetch" href="/assets/js/188.1fe871c8.js"><link rel="prefetch" href="/assets/js/189.3d842901.js"><link rel="prefetch" href="/assets/js/19.14b7d450.js"><link rel="prefetch" href="/assets/js/190.fdaaa036.js"><link rel="prefetch" href="/assets/js/191.0ba2c2c8.js"><link rel="prefetch" href="/assets/js/192.414af0da.js"><link rel="prefetch" href="/assets/js/193.e6be0fcf.js"><link rel="prefetch" href="/assets/js/194.b2566812.js"><link rel="prefetch" href="/assets/js/195.00bfbb36.js"><link rel="prefetch" href="/assets/js/196.59bcd7e2.js"><link rel="prefetch" href="/assets/js/197.152fbfac.js"><link rel="prefetch" href="/assets/js/198.366baa20.js"><link rel="prefetch" href="/assets/js/199.ad2ea7fd.js"><link rel="prefetch" href="/assets/js/20.79ab36ad.js"><link rel="prefetch" href="/assets/js/200.98c9c7ac.js"><link rel="prefetch" href="/assets/js/201.9ada4425.js"><link rel="prefetch" href="/assets/js/202.9aae7ed8.js"><link rel="prefetch" href="/assets/js/203.d3d54f61.js"><link rel="prefetch" href="/assets/js/204.a49392a2.js"><link rel="prefetch" href="/assets/js/205.f30a99e2.js"><link rel="prefetch" href="/assets/js/206.f6747956.js"><link rel="prefetch" href="/assets/js/207.3ae926e3.js"><link rel="prefetch" href="/assets/js/208.3c101b23.js"><link rel="prefetch" href="/assets/js/209.e362f0db.js"><link rel="prefetch" href="/assets/js/21.f2995909.js"><link rel="prefetch" href="/assets/js/210.8110fe55.js"><link rel="prefetch" href="/assets/js/211.4f532267.js"><link rel="prefetch" href="/assets/js/212.7c68d019.js"><link rel="prefetch" href="/assets/js/213.fdec3193.js"><link rel="prefetch" href="/assets/js/214.c511297f.js"><link rel="prefetch" href="/assets/js/215.3d44ccc9.js"><link rel="prefetch" href="/assets/js/216.933ab147.js"><link rel="prefetch" href="/assets/js/217.ffbc15be.js"><link rel="prefetch" href="/assets/js/218.f1edc261.js"><link rel="prefetch" href="/assets/js/219.f8ac5a8c.js"><link rel="prefetch" href="/assets/js/22.00bc0dc7.js"><link rel="prefetch" href="/assets/js/220.0f718f6b.js"><link rel="prefetch" href="/assets/js/221.5d1883bc.js"><link rel="prefetch" href="/assets/js/222.69891305.js"><link rel="prefetch" href="/assets/js/223.658dcd80.js"><link rel="prefetch" href="/assets/js/224.41017e28.js"><link rel="prefetch" href="/assets/js/225.354e6ab1.js"><link rel="prefetch" href="/assets/js/226.c4bc76bc.js"><link rel="prefetch" href="/assets/js/227.f427abae.js"><link rel="prefetch" href="/assets/js/228.3cb4d52a.js"><link rel="prefetch" href="/assets/js/229.a440b4b7.js"><link rel="prefetch" href="/assets/js/23.bd7064bd.js"><link rel="prefetch" href="/assets/js/230.1743c76f.js"><link rel="prefetch" href="/assets/js/231.6f8b0e34.js"><link rel="prefetch" href="/assets/js/232.46d28dc5.js"><link rel="prefetch" href="/assets/js/233.a4ea3da4.js"><link rel="prefetch" href="/assets/js/234.e3678d9d.js"><link rel="prefetch" href="/assets/js/235.2a0a0895.js"><link rel="prefetch" href="/assets/js/236.92dbf8c2.js"><link rel="prefetch" href="/assets/js/237.812feb9e.js"><link rel="prefetch" href="/assets/js/238.7b3695e9.js"><link rel="prefetch" href="/assets/js/239.6d97506b.js"><link rel="prefetch" href="/assets/js/24.483c917f.js"><link rel="prefetch" href="/assets/js/240.042e9a83.js"><link rel="prefetch" href="/assets/js/241.2e5db11e.js"><link rel="prefetch" href="/assets/js/25.e8e9ec70.js"><link rel="prefetch" href="/assets/js/26.88a91885.js"><link rel="prefetch" href="/assets/js/27.e9d10af8.js"><link rel="prefetch" href="/assets/js/28.4d43abd2.js"><link rel="prefetch" href="/assets/js/29.cf127a45.js"><link rel="prefetch" href="/assets/js/3.838546bc.js"><link rel="prefetch" href="/assets/js/30.26be9a48.js"><link rel="prefetch" href="/assets/js/31.35fc2866.js"><link rel="prefetch" href="/assets/js/32.28f48bcf.js"><link rel="prefetch" href="/assets/js/33.d7d15fd2.js"><link rel="prefetch" href="/assets/js/34.ba95fdd1.js"><link rel="prefetch" href="/assets/js/35.81978326.js"><link rel="prefetch" href="/assets/js/36.cca70e23.js"><link rel="prefetch" href="/assets/js/37.64c70518.js"><link rel="prefetch" href="/assets/js/38.2a9e4ea4.js"><link rel="prefetch" href="/assets/js/39.27deb40d.js"><link rel="prefetch" href="/assets/js/4.064e3e74.js"><link rel="prefetch" href="/assets/js/40.30113835.js"><link rel="prefetch" href="/assets/js/41.245d1eae.js"><link rel="prefetch" href="/assets/js/42.47600962.js"><link rel="prefetch" href="/assets/js/43.571f3569.js"><link rel="prefetch" href="/assets/js/44.95d0f2c8.js"><link rel="prefetch" href="/assets/js/45.71f469f3.js"><link rel="prefetch" href="/assets/js/46.b1c139a8.js"><link rel="prefetch" href="/assets/js/47.ddb0e03b.js"><link rel="prefetch" href="/assets/js/48.4d21dde2.js"><link rel="prefetch" href="/assets/js/49.f5b8c77a.js"><link rel="prefetch" href="/assets/js/5.e389fe4a.js"><link rel="prefetch" href="/assets/js/50.35e729ec.js"><link rel="prefetch" href="/assets/js/51.44cfd51f.js"><link rel="prefetch" href="/assets/js/52.c44eedc0.js"><link rel="prefetch" href="/assets/js/53.b88c2f67.js"><link rel="prefetch" href="/assets/js/54.39cae0c1.js"><link rel="prefetch" href="/assets/js/55.33f2b5c8.js"><link rel="prefetch" href="/assets/js/56.f3fd98bf.js"><link rel="prefetch" href="/assets/js/57.9d26e25a.js"><link rel="prefetch" href="/assets/js/58.153d8006.js"><link rel="prefetch" href="/assets/js/59.f523c4e5.js"><link rel="prefetch" href="/assets/js/6.94e775aa.js"><link rel="prefetch" href="/assets/js/60.8e071d19.js"><link rel="prefetch" href="/assets/js/61.c20ac73e.js"><link rel="prefetch" href="/assets/js/62.0588bf97.js"><link rel="prefetch" href="/assets/js/63.2d5c1bf4.js"><link rel="prefetch" href="/assets/js/64.cb34ab34.js"><link rel="prefetch" href="/assets/js/65.7bc53507.js"><link rel="prefetch" href="/assets/js/66.15913868.js"><link rel="prefetch" href="/assets/js/67.7aaa0ff4.js"><link rel="prefetch" href="/assets/js/68.f78407a8.js"><link rel="prefetch" href="/assets/js/69.7f33aef8.js"><link rel="prefetch" href="/assets/js/7.43582890.js"><link rel="prefetch" href="/assets/js/70.54722577.js"><link rel="prefetch" href="/assets/js/71.24cd25ed.js"><link rel="prefetch" href="/assets/js/72.8e45d45a.js"><link rel="prefetch" href="/assets/js/73.91fd469e.js"><link rel="prefetch" href="/assets/js/74.380ead8c.js"><link rel="prefetch" href="/assets/js/75.2cb73ff1.js"><link rel="prefetch" href="/assets/js/76.fbe6c13b.js"><link rel="prefetch" href="/assets/js/77.1b9103cb.js"><link rel="prefetch" href="/assets/js/78.13125d6b.js"><link rel="prefetch" href="/assets/js/79.8fdf6ab4.js"><link rel="prefetch" href="/assets/js/8.bd29fdb6.js"><link rel="prefetch" href="/assets/js/80.b828807f.js"><link rel="prefetch" href="/assets/js/81.cb01f467.js"><link rel="prefetch" href="/assets/js/82.38613d2f.js"><link rel="prefetch" href="/assets/js/83.df235aa4.js"><link rel="prefetch" href="/assets/js/84.d291a5a4.js"><link rel="prefetch" href="/assets/js/85.b08164c3.js"><link rel="prefetch" href="/assets/js/86.c0b7d5dd.js"><link rel="prefetch" href="/assets/js/87.1f329427.js"><link rel="prefetch" href="/assets/js/88.e5f3ec63.js"><link rel="prefetch" href="/assets/js/89.eaabe084.js"><link rel="prefetch" href="/assets/js/9.a3f11e7c.js"><link rel="prefetch" href="/assets/js/90.03bdddf0.js"><link rel="prefetch" href="/assets/js/91.2ddb53fb.js"><link rel="prefetch" href="/assets/js/92.f9ddaba2.js"><link rel="prefetch" href="/assets/js/93.09904c56.js"><link rel="prefetch" href="/assets/js/94.2b956910.js"><link rel="prefetch" href="/assets/js/95.ff6c367c.js"><link rel="prefetch" href="/assets/js/96.1174ca7f.js"><link rel="prefetch" href="/assets/js/97.447ad308.js"><link rel="prefetch" href="/assets/js/98.c537a9b3.js"><link rel="prefetch" href="/assets/js/99.dc8ab06e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74392c83.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ğŸ“–Documents</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âš¡ç³»åˆ—æ–‡ç« " class="dropdown-title"><span class="title">âš¡ç³»åˆ—æ–‡ç« </span> <span class="arrow down"></span></button> <button type="button" aria-label="âš¡ç³»åˆ—æ–‡ç« " class="mobile-dropdown-title"><span class="title">âš¡ç³»åˆ—æ–‡ç« </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link">
  ğŸš€åŸºäº abp vNext å’Œ .NET Core å¼€å‘åšå®¢é¡¹ç›®
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  ğŸˆPython
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  ğŸºæŠ€æœ¯æ ˆ
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  ğŸ‰æ€»ç»“
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ‘é˜¿æ˜ŸPlus" class="dropdown-title"><span class="title">ğŸ‘é˜¿æ˜ŸPlus</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ‘é˜¿æ˜ŸPlus" class="mobile-dropdown-title"><span class="title">ğŸ‘é˜¿æ˜ŸPlus</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docs.meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/meowv/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlus - åšå®¢å›­
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/3122268756261864" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlus - æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/Tencentgou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlusçš„å¾®åš
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://api.meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  api.meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.nuget.org/profiles/qix/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NuGet Gallery | qix
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    â­ï¸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="âš¡ç³»åˆ—æ–‡ç« " class="dropdown-title"><span class="title">âš¡ç³»åˆ—æ–‡ç« </span> <span class="arrow down"></span></button> <button type="button" aria-label="âš¡ç³»åˆ—æ–‡ç« " class="mobile-dropdown-title"><span class="title">âš¡ç³»åˆ—æ–‡ç« </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aspnetcore/abp-blog/" class="nav-link">
  ğŸš€åŸºäº abp vNext å’Œ .NET Core å¼€å‘åšå®¢é¡¹ç›®
</a></li></ul></div></div><div class="nav-item"><a href="/python/" class="nav-link">
  ğŸˆPython
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  ğŸºæŠ€æœ¯æ ˆ
</a></div><div class="nav-item"><a href="/summary/" class="nav-link">
  ğŸ‰æ€»ç»“
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ğŸ‘é˜¿æ˜ŸPlus" class="dropdown-title"><span class="title">ğŸ‘é˜¿æ˜ŸPlus</span> <span class="arrow down"></span></button> <button type="button" aria-label="ğŸ‘é˜¿æ˜ŸPlus" class="mobile-dropdown-title"><span class="title">ğŸ‘é˜¿æ˜ŸPlus</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://docs.meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  docs.meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.cnblogs.com/meowv/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlus - åšå®¢å›­
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.im/user/3122268756261864" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlus - æ˜é‡‘
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://weibo.com/Tencentgou/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  é˜¿æ˜ŸPlusçš„å¾®åš
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://api.meowv.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  api.meowv.com
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.nuget.org/profiles/qix/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  NuGet Gallery | qix
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/meowv/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    â­ï¸GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>.NET Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Blazor</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>å®‰è£… Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/stack/docker/install/ubuntu.html" class="sidebar-link">Ubuntu å®‰è£… Docker CE</a></li><li><a href="/stack/docker/install/debian.html" class="sidebar-link">Debian å®‰è£… Docker CE</a></li><li><a href="/stack/docker/install/fedora.html" class="sidebar-link">Fedora å®‰è£… Docker CE</a></li><li><a href="/stack/docker/install/centos.html" class="sidebar-link">CentOS å®‰è£… Docker CE</a></li><li><a href="/stack/docker/install/raspberry-pi.html" class="sidebar-link">æ ‘è“æ´¾å¡ç‰‡ç”µè„‘å®‰è£… Docker CE</a></li><li><a href="/stack/docker/install/offline.html" class="sidebar-link">ç¦»çº¿éƒ¨ç½²Docker</a></li><li><a href="/stack/docker/install/mac.html" class="sidebar-link">macOS å®‰è£… Docker Desktop CE</a></li><li><a href="/stack/docker/install/windows.html" class="sidebar-link">Windows 10 å®‰è£… Docker Desktop CE</a></li><li><a href="/stack/docker/install/mirror.html" class="sidebar-link">é•œåƒåŠ é€Ÿå™¨</a></li><li><a href="/stack/docker/install/experimental.html" class="sidebar-link">å¼€å¯å®éªŒç‰¹æ€§</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker ç®€ä»‹</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker åŸºæœ¬æ¦‚å¿µ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker ä»“åº“</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>ä½¿ç”¨ Docker é•œåƒ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Dockerfile</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>æ“ä½œ Docker å®¹å™¨</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker æ•°æ®ç®¡ç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker ç½‘ç»œé…ç½®</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Swarm mode</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/stack/docker/linuxkit/" class="sidebar-link">LinuxKit</a></li><li><a href="/stack/docker/podman/" class="sidebar-link">podman</a></li><li><a href="/stack/docker/faq/" class="sidebar-link">å¸¸è§é—®é¢˜æ€»ç»“</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker å¸¸ç”¨é•œåƒ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker å‘½ä»¤</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/stack/docker/best_practices/" aria-current="page" class="active sidebar-link">Dockerfile æœ€ä½³å®è·µ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="sidebar-link">ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="sidebar-link">å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="sidebar-link">ä½¿ç”¨ .dockerignore æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="sidebar-link">é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="sidebar-link">ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="sidebar-link">é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#å°†å¤šè¡Œå‚æ•°æ’åº" class="sidebar-link">å°†å¤šè¡Œå‚æ•°æ’åº</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#æ„å»ºç¼“å­˜" class="sidebar-link">æ„å»ºç¼“å­˜</a></li></ul></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#dockerfile-æŒ‡ä»¤" class="sidebar-link">Dockerfile æŒ‡ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#from" class="sidebar-link">FROM</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#label" class="sidebar-link">LABEL</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#run" class="sidebar-link">RUN</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#cmd" class="sidebar-link">CMD</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#expose" class="sidebar-link">EXPOSE</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#env" class="sidebar-link">ENV</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#add-å’Œ-copy" class="sidebar-link">ADD å’Œ COPY</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#entrypoint" class="sidebar-link">ENTRYPOINT</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#volume" class="sidebar-link">VOLUME</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#user" class="sidebar-link">USER</a></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#workdir" class="sidebar-link">WORKDIR</a></li></ul></li><li class="sidebar-sub-header"><a href="/stack/docker/best_practices/#å®˜æ–¹é•œåƒç¤ºä¾‹" class="sidebar-link">å®˜æ–¹é•œåƒç¤ºä¾‹</a></li></ul></li><li><a href="/stack/docker/debug/" class="sidebar-link">å¦‚ä½•è°ƒè¯• Docker</a></li><li><a href="/stack/docker/resources/" class="sidebar-link">èµ„æºé“¾æ¥</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>CI/CD</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Compose</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Storage</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Planning Analytics</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dockerfile-æœ€ä½³å®è·µ"><a href="#dockerfile-æœ€ä½³å®è·µ" class="header-anchor">#</a> Dockerfile æœ€ä½³å®è·µ</h1> <p>æœ¬é™„å½•æ˜¯ç¬”è€…å¯¹ Docker å®˜æ–¹æ–‡æ¡£ä¸­ <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">Best practices for writing Dockerfiles<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> çš„ç†è§£ä¸ç¿»è¯‘ã€‚</p> <h2 id="ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®"><a href="#ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®" class="header-anchor">#</a> ä¸€èˆ¬æ€§çš„æŒ‡å—å’Œå»ºè®®</h2> <h3 id="å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„"><a href="#å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„" class="header-anchor">#</a> å®¹å™¨åº”è¯¥æ˜¯çŸ­æš‚çš„</h3> <p>é€šè¿‡ <code>Dockerfile</code> æ„å»ºçš„é•œåƒæ‰€å¯åŠ¨çš„å®¹å™¨åº”è¯¥å°½å¯èƒ½çŸ­æš‚ï¼ˆç”Ÿå‘½å‘¨æœŸçŸ­ï¼‰ã€‚ã€ŒçŸ­æš‚ã€æ„å‘³ç€å¯ä»¥åœæ­¢å’Œé”€æ¯å®¹å™¨ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨å¹¶éƒ¨ç½²å¥½æ‰€éœ€çš„è®¾ç½®å’Œé…ç½®å·¥ä½œé‡åº”è¯¥æ˜¯æå°çš„ã€‚</p> <h3 id="ä½¿ç”¨-dockerignore-æ–‡ä»¶"><a href="#ä½¿ç”¨-dockerignore-æ–‡ä»¶" class="header-anchor">#</a> ä½¿ç”¨ <code>.dockerignore</code> æ–‡ä»¶</h3> <p>ä½¿ç”¨ <code>Dockerfile</code> æ„å»ºé•œåƒæ—¶æœ€å¥½æ˜¯å°† <code>Dockerfile</code> æ”¾ç½®åœ¨ä¸€ä¸ªæ–°å»ºçš„ç©ºç›®å½•ä¸‹ã€‚ç„¶åå°†æ„å»ºé•œåƒæ‰€éœ€è¦çš„æ–‡ä»¶æ·»åŠ åˆ°è¯¥ç›®å½•ä¸­ã€‚ä¸ºäº†æé«˜æ„å»ºé•œåƒçš„æ•ˆç‡ï¼Œä½ å¯ä»¥åœ¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.dockerignore</code> æ–‡ä»¶æ¥æŒ‡å®šè¦å¿½ç•¥çš„æ–‡ä»¶å’Œç›®å½•ã€‚<code>.dockerignore</code> æ–‡ä»¶çš„æ’é™¤æ¨¡å¼è¯­æ³•å’Œ Git çš„ <code>.gitignore</code> æ–‡ä»¶ç›¸ä¼¼ã€‚</p> <h3 id="é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…"><a href="#é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…" class="header-anchor">#</a> é¿å…å®‰è£…ä¸å¿…è¦çš„åŒ…</h3> <p>ä¸ºäº†é™ä½å¤æ‚æ€§ã€å‡å°‘ä¾èµ–ã€å‡å°æ–‡ä»¶å¤§å°ã€èŠ‚çº¦æ„å»ºæ—¶é—´ï¼Œä½ åº”è¯¥é¿å…å®‰è£…ä»»ä½•ä¸å¿…è¦çš„åŒ…ã€‚ä¾‹å¦‚ï¼Œä¸è¦åœ¨æ•°æ®åº“é•œåƒä¸­åŒ…å«ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚</p> <h3 id="ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹"><a href="#ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹" class="header-anchor">#</a> ä¸€ä¸ªå®¹å™¨åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹</h3> <p>åº”è¯¥ä¿è¯åœ¨ä¸€ä¸ªå®¹å™¨ä¸­åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ã€‚å°†å¤šä¸ªåº”ç”¨è§£è€¦åˆ°ä¸åŒå®¹å™¨ä¸­ï¼Œä¿è¯äº†å®¹å™¨çš„æ¨ªå‘æ‰©å±•å’Œå¤ç”¨ã€‚ä¾‹å¦‚ web åº”ç”¨åº”è¯¥åŒ…å«ä¸‰ä¸ªå®¹å™¨ï¼šwebåº”ç”¨ã€æ•°æ®åº“ã€ç¼“å­˜ã€‚</p> <p>å¦‚æœå®¹å™¨äº’ç›¸ä¾èµ–ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="/stack/docker/network/linking.html">Docker è‡ªå®šä¹‰ç½‘ç»œ</a> æ¥æŠŠè¿™äº›å®¹å™¨è¿æ¥èµ·æ¥ã€‚</p> <h3 id="é•œåƒå±‚æ•°å°½å¯èƒ½å°‘"><a href="#é•œåƒå±‚æ•°å°½å¯èƒ½å°‘" class="header-anchor">#</a> é•œåƒå±‚æ•°å°½å¯èƒ½å°‘</h3> <p>ä½ éœ€è¦åœ¨ <code>Dockerfile</code> å¯è¯»æ€§ï¼ˆä¹ŸåŒ…æ‹¬é•¿æœŸçš„å¯ç»´æŠ¤æ€§ï¼‰å’Œå‡å°‘å±‚æ•°ä¹‹é—´åšä¸€ä¸ªå¹³è¡¡ã€‚</p> <h3 id="å°†å¤šè¡Œå‚æ•°æ’åº"><a href="#å°†å¤šè¡Œå‚æ•°æ’åº" class="header-anchor">#</a> å°†å¤šè¡Œå‚æ•°æ’åº</h3> <p>å°†å¤šè¡Œå‚æ•°æŒ‰å­—æ¯é¡ºåºæ’åºï¼ˆæ¯”å¦‚è¦å®‰è£…å¤šä¸ªåŒ…æ—¶ï¼‰ã€‚è¿™å¯ä»¥å¸®åŠ©ä½ é¿å…é‡å¤åŒ…å«åŒä¸€ä¸ªåŒ…ï¼Œæ›´æ–°åŒ…åˆ—è¡¨æ—¶ä¹Ÿæ›´å®¹æ˜“ã€‚ä¹Ÿä¾¿äº <code>PRs</code> é˜…è¯»å’Œå®¡æŸ¥ã€‚å»ºè®®åœ¨åæ–œæ ç¬¦å· <code>\</code> ä¹‹å‰æ·»åŠ ä¸€ä¸ªç©ºæ ¼ï¼Œä»¥å¢åŠ å¯è¯»æ€§ã€‚</p> <p>ä¸‹é¢æ˜¯æ¥è‡ª <code>buildpack-deps</code> é•œåƒçš„ä¾‹å­ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
  bzr \
  cvs \
  git \
  mercurial \
  subversion
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="æ„å»ºç¼“å­˜"><a href="#æ„å»ºç¼“å­˜" class="header-anchor">#</a> æ„å»ºç¼“å­˜</h3> <p>åœ¨é•œåƒçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒDocker ä¼šéå† <code>Dockerfile</code> æ–‡ä»¶ä¸­çš„æŒ‡ä»¤ï¼Œç„¶åæŒ‰é¡ºåºæ‰§è¡Œã€‚åœ¨æ‰§è¡Œæ¯æ¡æŒ‡ä»¤ä¹‹å‰ï¼ŒDocker éƒ½ä¼šåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾æ˜¯å¦å·²ç»å­˜åœ¨å¯é‡ç”¨çš„é•œåƒï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ç°å­˜çš„é•œåƒï¼Œä¸å†é‡å¤åˆ›å»ºã€‚å¦‚æœä½ ä¸æƒ³åœ¨æ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¯ä»¥åœ¨ <code>docker build</code> å‘½ä»¤ä¸­ä½¿ç”¨ <code>--no-cache=true</code> é€‰é¡¹ã€‚</p> <p>ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ç¼“å­˜ï¼Œä½ å¾—æ˜ç™½ä»€ä¹ˆæ—¶å€™ä¼šï¼Œä»€ä¹ˆæ—¶å€™ä¸ä¼šæ‰¾åˆ°åŒ¹é…çš„é•œåƒï¼Œéµå¾ªçš„åŸºæœ¬è§„åˆ™å¦‚ä¸‹ï¼š</p> <ul><li>ä»ä¸€ä¸ªåŸºç¡€é•œåƒå¼€å§‹ï¼ˆ<code>FROM</code> æŒ‡ä»¤æŒ‡å®šï¼‰ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤å°†å’Œè¯¥åŸºç¡€é•œåƒçš„æ‰€æœ‰å­é•œåƒè¿›è¡ŒåŒ¹é…ï¼Œæ£€æŸ¥è¿™äº›å­é•œåƒè¢«åˆ›å»ºæ—¶ä½¿ç”¨çš„æŒ‡ä»¤æ˜¯å¦å’Œè¢«æ£€æŸ¥çš„æŒ‡ä»¤å®Œå…¨ä¸€æ ·ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li> <li>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåªéœ€è¦ç®€å•åœ°å¯¹æ¯” <code>Dockerfile</code> ä¸­çš„æŒ‡ä»¤å’Œå­é•œåƒã€‚ç„¶è€Œï¼Œæœ‰äº›æŒ‡ä»¤éœ€è¦æ›´å¤šçš„æ£€æŸ¥å’Œè§£é‡Šã€‚</li> <li>å¯¹äº <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œé•œåƒä¸­å¯¹åº”æ–‡ä»¶çš„å†…å®¹ä¹Ÿä¼šè¢«æ£€æŸ¥ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½ä¼šè®¡ç®—å‡ºä¸€ä¸ªæ ¡éªŒå’Œã€‚æ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´å’Œæœ€åè®¿é—®æ—¶é—´ä¸ä¼šçº³å…¥æ ¡éªŒã€‚åœ¨ç¼“å­˜çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è¿™äº›æ ¡éªŒå’Œå’Œå·²å­˜åœ¨é•œåƒä¸­çš„æ–‡ä»¶æ ¡éªŒå’Œè¿›è¡Œå¯¹æ¯”ã€‚å¦‚æœæ–‡ä»¶æœ‰ä»»ä½•æ”¹å˜ï¼Œæ¯”å¦‚å†…å®¹å’Œå…ƒæ•°æ®ï¼Œåˆ™ç¼“å­˜å¤±æ•ˆã€‚</li> <li>é™¤äº† <code>ADD</code> å’Œ <code>COPY</code> æŒ‡ä»¤ï¼Œç¼“å­˜åŒ¹é…è¿‡ç¨‹ä¸ä¼šæŸ¥çœ‹ä¸´æ—¶å®¹å™¨ä¸­çš„æ–‡ä»¶æ¥å†³å®šç¼“å­˜æ˜¯å¦åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œå½“æ‰§è¡Œå®Œ <code>RUN apt-get -y update</code> æŒ‡ä»¤åï¼Œå®¹å™¨ä¸­ä¸€äº›æ–‡ä»¶è¢«æ›´æ–°ï¼Œä½† Docker ä¸ä¼šæ£€æŸ¥è¿™äº›æ–‡ä»¶ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œåªæœ‰æŒ‡ä»¤å­—ç¬¦ä¸²æœ¬èº«è¢«ç”¨æ¥åŒ¹é…ç¼“å­˜ã€‚</li></ul> <p>ä¸€æ—¦ç¼“å­˜å¤±æ•ˆï¼Œæ‰€æœ‰åç»­çš„ <code>Dockerfile</code> æŒ‡ä»¤éƒ½å°†äº§ç”Ÿæ–°çš„é•œåƒï¼Œç¼“å­˜ä¸ä¼šè¢«ä½¿ç”¨ã€‚</p> <h2 id="dockerfile-æŒ‡ä»¤"><a href="#dockerfile-æŒ‡ä»¤" class="header-anchor">#</a> Dockerfile æŒ‡ä»¤</h2> <p>ä¸‹é¢é’ˆå¯¹ <code>Dockerfile</code> ä¸­å„ç§æŒ‡ä»¤çš„æœ€ä½³ç¼–å†™æ–¹å¼ç»™å‡ºå»ºè®®ã€‚</p> <h3 id="from"><a href="#from" class="header-anchor">#</a> FROM</h3> <p>å°½å¯èƒ½ä½¿ç”¨å½“å‰å®˜æ–¹ä»“åº“ä½œä¸ºä½ æ„å»ºé•œåƒçš„åŸºç¡€ã€‚æ¨èä½¿ç”¨ <a href="https://hub.docker.com/_/alpine/" target="_blank" rel="noopener noreferrer">Alpine<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> é•œåƒï¼Œå› ä¸ºå®ƒè¢«ä¸¥æ ¼æ§åˆ¶å¹¶ä¿æŒæœ€å°å°ºå¯¸ï¼ˆç›®å‰å°äº 5 MBï¼‰ï¼Œä½†å®ƒä»ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‘è¡Œç‰ˆã€‚</p> <h3 id="label"><a href="#label" class="header-anchor">#</a> LABEL</h3> <p>ä½ å¯ä»¥ç»™é•œåƒæ·»åŠ æ ‡ç­¾æ¥å¸®åŠ©ç»„ç»‡é•œåƒã€è®°å½•è®¸å¯ä¿¡æ¯ã€è¾…åŠ©è‡ªåŠ¨åŒ–æ„å»ºç­‰ã€‚æ¯ä¸ªæ ‡ç­¾ä¸€è¡Œï¼Œç”± <code>LABEL</code> å¼€å¤´åŠ ä¸Šä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾å¯¹ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å„ç§ä¸åŒçš„å¯èƒ½æ ¼å¼ã€‚<code>#</code> å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šå†…å®¹ã€‚</p> <blockquote><p>æ³¨æ„ï¼šå¦‚æœä½ çš„å­—ç¬¦ä¸²ä¸­åŒ…å«ç©ºæ ¼ï¼Œå¿…é¡»å°†å­—ç¬¦ä¸²æ”¾å…¥å¼•å·ä¸­æˆ–è€…å¯¹ç©ºæ ¼ä½¿ç”¨è½¬ä¹‰ã€‚å¦‚æœå­—ç¬¦ä¸²å†…å®¹æœ¬èº«å°±åŒ…å«å¼•å·ï¼Œå¿…é¡»å¯¹å¼•å·ä½¿ç”¨è½¬ä¹‰ã€‚</p></blockquote> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># Set one or more individual labels</span>
<span class="token keyword">LABEL</span> com.example.version=<span class="token string">&quot;0.0.1-beta&quot;</span>

<span class="token keyword">LABEL</span> vendor=<span class="token string">&quot;ACME Incorporated&quot;</span>

<span class="token keyword">LABEL</span> com.example.release<span class="token punctuation">-</span>date=<span class="token string">&quot;2015-02-12&quot;</span>

<span class="token keyword">LABEL</span> com.example.version.is<span class="token punctuation">-</span>production=<span class="token string">&quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¸€ä¸ªé•œåƒå¯ä»¥åŒ…å«å¤šä¸ªæ ‡ç­¾ï¼Œä½†å»ºè®®å°†å¤šä¸ªæ ‡ç­¾æ”¾å…¥åˆ°ä¸€ä¸ª <code>LABEL</code> æŒ‡ä»¤ä¸­ã€‚</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token comment"># Set multiple labels at once, using line-continuation characters to break long lines</span>
<span class="token keyword">LABEL</span> vendor=ACME\ Incorporated \
      com.example.is<span class="token punctuation">-</span>beta= \
      com.example.is<span class="token punctuation">-</span>production=<span class="token string">&quot;&quot;</span> \
      com.example.version=<span class="token string">&quot;0.0.1-beta&quot;</span> \
      com.example.release<span class="token punctuation">-</span>date=<span class="token string">&quot;2015-02-12&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å…³äºæ ‡ç­¾å¯ä»¥æ¥å—çš„é”®å€¼å¯¹ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener noreferrer">Understanding object labels<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚å…³äºæŸ¥è¯¢æ ‡ç­¾ä¿¡æ¯ï¼Œå‚è€ƒ <a href="https://docs.docker.com/config/labels-custom-metadata/" target="_blank" rel="noopener noreferrer">Managing labels on objects<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <h3 id="run"><a href="#run" class="header-anchor">#</a> RUN</h3> <p>ä¸ºäº†ä¿æŒ <code>Dockerfile</code> æ–‡ä»¶çš„å¯è¯»æ€§ï¼Œå¯ç†è§£æ€§ï¼Œä»¥åŠå¯ç»´æŠ¤æ€§ï¼Œå»ºè®®å°†é•¿çš„æˆ–å¤æ‚çš„ <code>RUN</code> æŒ‡ä»¤ç”¨åæ–œæ  <code>\</code> åˆ†å‰²æˆå¤šè¡Œã€‚</p> <h4 id="apt-get"><a href="#apt-get" class="header-anchor">#</a> apt-get</h4> <p><code>RUN</code> æŒ‡ä»¤æœ€å¸¸è§çš„ç”¨æ³•æ˜¯å®‰è£…åŒ…ç”¨çš„ <code>apt-get</code>ã€‚å› ä¸º <code>RUN apt-get</code> æŒ‡ä»¤ä¼šå®‰è£…åŒ…ï¼Œæ‰€ä»¥æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ã€‚</p> <p>ä¸è¦ä½¿ç”¨ <code>RUN apt-get upgrade</code> æˆ– <code>dist-upgrade</code>ï¼Œå› ä¸ºè®¸å¤šåŸºç¡€é•œåƒä¸­çš„ã€Œå¿…é¡»ã€åŒ…ä¸ä¼šåœ¨ä¸€ä¸ªéç‰¹æƒå®¹å™¨ä¸­å‡çº§ã€‚å¦‚æœåŸºç¡€é•œåƒä¸­çš„æŸä¸ªåŒ…è¿‡æ—¶äº†ï¼Œä½ åº”è¯¥è”ç³»å®ƒçš„ç»´æŠ¤è€…ã€‚å¦‚æœä½ ç¡®å®šæŸä¸ªç‰¹å®šçš„åŒ…ï¼Œæ¯”å¦‚ <code>foo</code>ï¼Œéœ€è¦å‡çº§ï¼Œä½¿ç”¨ <code>apt-get install -y foo</code> å°±è¡Œï¼Œè¯¥æŒ‡ä»¤ä¼šè‡ªåŠ¨å‡çº§ <code>foo</code> åŒ…ã€‚</p> <p>æ°¸è¿œå°† <code>RUN apt-get update</code> å’Œ <code>apt-get install</code> ç»„åˆæˆä¸€æ¡ <code>RUN</code> å£°æ˜ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
        package<span class="token punctuation">-</span>bar \
        package<span class="token punctuation">-</span>baz \
        package<span class="token punctuation">-</span>foo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å°† <code>apt-get update</code> æ”¾åœ¨ä¸€æ¡å•ç‹¬çš„ <code>RUN</code> å£°æ˜ä¸­ä¼šå¯¼è‡´ç¼“å­˜é—®é¢˜ä»¥åŠåç»­çš„ <code>apt-get install</code> å¤±è´¥ã€‚æ¯”å¦‚ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ª <code>Dockerfile</code> æ–‡ä»¶ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">FROM</span> ubuntu<span class="token punctuation">:</span>18.04

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y curl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ„å»ºé•œåƒåï¼Œæ‰€æœ‰çš„å±‚éƒ½åœ¨ Docker çš„ç¼“å­˜ä¸­ã€‚å‡è®¾ä½ åæ¥åˆä¿®æ”¹äº†å…¶ä¸­çš„ <code>apt-get install</code> æ·»åŠ äº†ä¸€ä¸ªåŒ…ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">FROM</span> ubuntu<span class="token punctuation">:</span>18.04

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update

<span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y curl nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Docker å‘ç°ä¿®æ”¹åçš„ <code>RUN apt-get update</code> æŒ‡ä»¤å’Œä¹‹å‰çš„å®Œå…¨ä¸€æ ·ã€‚æ‰€ä»¥ï¼Œ<code>apt-get update</code> ä¸ä¼šæ‰§è¡Œï¼Œè€Œæ˜¯ä½¿ç”¨ä¹‹å‰çš„ç¼“å­˜é•œåƒã€‚å› ä¸º <code>apt-get update</code> æ²¡æœ‰è¿è¡Œï¼Œåé¢çš„ <code>apt-get install</code> å¯èƒ½å®‰è£…çš„æ˜¯è¿‡æ—¶çš„ <code>curl</code> å’Œ <code>nginx</code> ç‰ˆæœ¬ã€‚</p> <p>ä½¿ç”¨ <code>RUN apt-get update &amp;&amp; apt-get install -y</code> å¯ä»¥ç¡®ä¿ä½ çš„ Dockerfiles æ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯åŒ…çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦è¿›ä¸€æ­¥çš„ç¼–ç æˆ–é¢å¤–å¹²é¢„ã€‚è¿™é¡¹æŠ€æœ¯å«ä½œ <code>cache busting</code>ã€‚ä½ ä¹Ÿå¯ä»¥æ˜¾ç¤ºæŒ‡å®šä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å·æ¥è¾¾åˆ° <code>cache-busting</code>ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å›ºå®šç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
    package<span class="token punctuation">-</span>bar \
    package<span class="token punctuation">-</span>baz \
    package<span class="token punctuation">-</span>foo=1.3.*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å›ºå®šç‰ˆæœ¬ä¼šè¿«ä½¿æ„å»ºè¿‡ç¨‹æ£€ç´¢ç‰¹å®šçš„ç‰ˆæœ¬ï¼Œè€Œä¸ç®¡ç¼“å­˜ä¸­æœ‰ä»€ä¹ˆã€‚è¿™é¡¹æŠ€æœ¯ä¹Ÿå¯ä»¥å‡å°‘å› æ‰€éœ€åŒ…ä¸­æœªé¢„æ–™åˆ°çš„å˜åŒ–è€Œå¯¼è‡´çš„å¤±è´¥ã€‚</p> <p>ä¸‹é¢æ˜¯ä¸€ä¸ª <code>RUN</code> æŒ‡ä»¤çš„ç¤ºä¾‹æ¨¡æ¿ï¼Œå±•ç¤ºäº†æ‰€æœ‰å…³äº <code>apt-get</code> çš„å»ºè®®ã€‚</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> apt<span class="token punctuation">-</span>get update &amp;&amp; apt<span class="token punctuation">-</span>get install <span class="token punctuation">-</span>y \
    aufs<span class="token punctuation">-</span>tools \
    automake \
    build<span class="token punctuation">-</span>essential \
    curl \
    dpkg<span class="token punctuation">-</span>sig \
    libcap<span class="token punctuation">-</span>dev \
    libsqlite3<span class="token punctuation">-</span>dev \
    mercurial \
    reprepro \
    ruby1.9.1 \
    ruby1.9.1<span class="token punctuation">-</span>dev \
    s3cmd=1.1.* \
 &amp;&amp; rm <span class="token punctuation">-</span>rf /var/lib/apt/lists/*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å…¶ä¸­ <code>s3cmd</code> æŒ‡ä»¤æŒ‡å®šäº†ä¸€ä¸ªç‰ˆæœ¬å· <code>1.1.*</code>ã€‚å¦‚æœä¹‹å‰çš„é•œåƒä½¿ç”¨çš„æ˜¯æ›´æ—§çš„ç‰ˆæœ¬ï¼ŒæŒ‡å®šæ–°çš„ç‰ˆæœ¬ä¼šå¯¼è‡´ <code>apt-get udpate</code> ç¼“å­˜å¤±æ•ˆå¹¶ç¡®ä¿å®‰è£…çš„æ˜¯æ–°ç‰ˆæœ¬ã€‚</p> <p>å¦å¤–ï¼Œæ¸…ç†æ‰ apt ç¼“å­˜ <code>var/lib/apt/lists</code> å¯ä»¥å‡å°é•œåƒå¤§å°ã€‚å› ä¸º <code>RUN</code> æŒ‡ä»¤çš„å¼€å¤´ä¸º <code>apt-get udpate</code>ï¼ŒåŒ…ç¼“å­˜æ€»æ˜¯ä¼šåœ¨ <code>apt-get install</code> ä¹‹å‰åˆ·æ–°ã€‚</p> <blockquote><p>æ³¨æ„ï¼šå®˜æ–¹çš„ Debian å’Œ Ubuntu é•œåƒä¼šè‡ªåŠ¨è¿è¡Œ apt-get cleanï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼çš„è°ƒç”¨ apt-get cleanã€‚</p></blockquote> <h3 id="cmd"><a href="#cmd" class="header-anchor">#</a> CMD</h3> <p><code>CMD</code> æŒ‡ä»¤ç”¨äºæ‰§è¡Œç›®æ ‡é•œåƒä¸­åŒ…å«çš„è½¯ä»¶ï¼Œå¯ä»¥åŒ…å«å‚æ•°ã€‚<code>CMD</code> å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åº”è¯¥ä»¥ <code>CMD [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;...]</code> çš„å½¢å¼ä½¿ç”¨ã€‚å› æ­¤ï¼Œå¦‚æœåˆ›å»ºé•œåƒçš„ç›®çš„æ˜¯ä¸ºäº†éƒ¨ç½²æŸä¸ªæœåŠ¡(æ¯”å¦‚ <code>Apache</code>)ï¼Œä½ å¯èƒ½ä¼šæ‰§è¡Œç±»ä¼¼äº <code>CMD [&quot;apache2&quot;, &quot;-DFOREGROUND&quot;]</code> å½¢å¼çš„å‘½ä»¤ã€‚æˆ‘ä»¬å»ºè®®ä»»ä½•æœåŠ¡é•œåƒéƒ½ä½¿ç”¨è¿™ç§å½¢å¼çš„å‘½ä»¤ã€‚</p> <p>å¤šæ•°æƒ…å†µä¸‹ï¼Œ<code>CMD</code> éƒ½éœ€è¦ä¸€ä¸ªäº¤äº’å¼çš„ <code>shell</code> (bash, Python, perl ç­‰)ï¼Œä¾‹å¦‚ <code>CMD [&quot;perl&quot;, &quot;-de0&quot;]</code>ï¼Œæˆ–è€… <code>CMD [&quot;PHP&quot;, &quot;-a&quot;]</code>ã€‚ä½¿ç”¨è¿™ç§å½¢å¼æ„å‘³ç€ï¼Œå½“ä½ æ‰§è¡Œç±»ä¼¼ <code>docker run -it python</code> æ—¶ï¼Œä½ ä¼šè¿›å…¥ä¸€ä¸ªå‡†å¤‡å¥½çš„ <code>shell</code> ä¸­ã€‚<code>CMD</code> åº”è¯¥åœ¨æå°‘çš„æƒ…å†µä¸‹æ‰èƒ½ä»¥ <code>CMD [&quot;param&quot;, &quot;param&quot;]</code> çš„å½¢å¼ä¸ <code>ENTRYPOINT</code> ååŒä½¿ç”¨ï¼Œé™¤éä½ å’Œä½ çš„é•œåƒä½¿ç”¨è€…éƒ½å¯¹ <code>ENTRYPOINT</code> çš„å·¥ä½œæ–¹å¼ååˆ†ç†Ÿæ‚‰ã€‚</p> <h3 id="expose"><a href="#expose" class="header-anchor">#</a> EXPOSE</h3> <p><code>EXPOSE</code> æŒ‡ä»¤ç”¨äºæŒ‡å®šå®¹å™¨å°†è¦ç›‘å¬çš„ç«¯å£ã€‚å› æ­¤ï¼Œä½ åº”è¯¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºä½¿ç”¨å¸¸è§çš„ç«¯å£ã€‚ä¾‹å¦‚ï¼Œæä¾› <code>Apache</code> web æœåŠ¡çš„é•œåƒåº”è¯¥ä½¿ç”¨ <code>EXPOSE 80</code>ï¼Œè€Œæä¾› <code>MongoDB</code> æœåŠ¡çš„é•œåƒä½¿ç”¨ <code>EXPOSE 27017</code>ã€‚</p> <p>å¯¹äºå¤–éƒ¨è®¿é—®ï¼Œç”¨æˆ·å¯ä»¥åœ¨æ‰§è¡Œ <code>docker run</code> æ—¶ä½¿ç”¨ä¸€ä¸ªæ ‡å¿—æ¥æŒ‡ç¤ºå¦‚ä½•å°†æŒ‡å®šçš„ç«¯å£æ˜ å°„åˆ°æ‰€é€‰æ‹©çš„ç«¯å£ã€‚</p> <h3 id="env"><a href="#env" class="header-anchor">#</a> ENV</h3> <p>ä¸ºäº†æ–¹ä¾¿æ–°ç¨‹åºè¿è¡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>ENV</code> æ¥ä¸ºå®¹å™¨ä¸­å®‰è£…çš„ç¨‹åºæ›´æ–° <code>PATH</code> ç¯å¢ƒå˜é‡ã€‚ä¾‹å¦‚ä½¿ç”¨ <code>ENV PATH /usr/local/nginx/bin:$PATH</code> æ¥ç¡®ä¿ <code>CMD [&quot;nginx&quot;]</code> èƒ½æ­£ç¡®è¿è¡Œã€‚</p> <p><code>ENV</code> æŒ‡ä»¤ä¹Ÿå¯ç”¨äºä¸ºä½ æƒ³è¦å®¹å™¨åŒ–çš„æœåŠ¡æä¾›å¿…è¦çš„ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ Postgres éœ€è¦çš„ <code>PGDATA</code>ã€‚</p> <p>æœ€åï¼Œ<code>ENV</code> ä¹Ÿèƒ½ç”¨äºè®¾ç½®å¸¸è§çš„ç‰ˆæœ¬å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ENV</span> PG_MAJOR 9.3

<span class="token keyword">ENV</span> PG_VERSION 9.3.4

<span class="token keyword">RUN</span> curl <span class="token punctuation">-</span>SL http<span class="token punctuation">:</span>//example.com/postgres<span class="token punctuation">-</span>$PG_VERSION.tar.xz <span class="token punctuation">|</span> tar <span class="token punctuation">-</span>xJC /usr/src/postgress &amp;&amp; â€¦

<span class="token keyword">ENV</span> PATH /usr/local/postgres<span class="token punctuation">-</span>$PG_MAJOR/bin<span class="token punctuation">:</span>$PATH
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç±»ä¼¼äºç¨‹åºä¸­çš„å¸¸é‡ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥è®©ä½ åªéœ€æ”¹å˜ <code>ENV</code> æŒ‡ä»¤æ¥è‡ªåŠ¨çš„æ”¹å˜å®¹å™¨ä¸­çš„è½¯ä»¶ç‰ˆæœ¬ã€‚</p> <h3 id="add-å’Œ-copy"><a href="#add-å’Œ-copy" class="header-anchor">#</a> ADD å’Œ COPY</h3> <p>è™½ç„¶ <code>ADD</code> å’Œ <code>COPY</code> åŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¸€èˆ¬ä¼˜å…ˆä½¿ç”¨ <code>COPY</code>ã€‚å› ä¸ºå®ƒæ¯” <code>ADD</code> æ›´é€æ˜ã€‚<code>COPY</code> åªæ”¯æŒç®€å•å°†æœ¬åœ°æ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ä¸­ï¼Œè€Œ <code>ADD</code> æœ‰ä¸€äº›å¹¶ä¸æ˜æ˜¾çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚æœ¬åœ° tar æå–å’Œè¿œç¨‹ URL æ”¯æŒï¼‰ã€‚å› æ­¤ï¼Œ<code>ADD</code> çš„æœ€ä½³ç”¨ä¾‹æ˜¯å°†æœ¬åœ° tar æ–‡ä»¶è‡ªåŠ¨æå–åˆ°é•œåƒä¸­ï¼Œä¾‹å¦‚ <code>ADD rootfs.tar.xz</code>ã€‚</p> <p>å¦‚æœä½ çš„ <code>Dockerfile</code> æœ‰å¤šä¸ªæ­¥éª¤éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­ä¸åŒçš„æ–‡ä»¶ã€‚å•ç‹¬ <code>COPY</code> æ¯ä¸ªæ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§çš„ <code>COPY</code> æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™å°†ä¿è¯æ¯ä¸ªæ­¥éª¤çš„æ„å»ºç¼“å­˜åªåœ¨ç‰¹å®šçš„æ–‡ä»¶å˜åŒ–æ—¶å¤±æ•ˆã€‚ä¾‹å¦‚ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">COPY</span> requirements.txt /tmp/

<span class="token keyword">RUN</span> pip install <span class="token punctuation">-</span><span class="token punctuation">-</span>requirement /tmp/requirements.txt

<span class="token keyword">COPY</span> . /tmp/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æœå°† <code>COPY . /tmp/</code> æ”¾ç½®åœ¨ <code>RUN</code> æŒ‡ä»¤ä¹‹å‰ï¼Œåªè¦ <code>.</code> ç›®å½•ä¸­ä»»ä½•ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œéƒ½ä¼šå¯¼è‡´åç»­æŒ‡ä»¤çš„ç¼“å­˜å¤±æ•ˆã€‚</p> <p>ä¸ºäº†è®©é•œåƒå°½é‡å°ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨ <code>ADD</code> æŒ‡ä»¤ä»è¿œç¨‹ URL è·å–åŒ…ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>curl</code> å’Œ <code>wget</code>ã€‚è¿™æ ·ä½ å¯ä»¥åœ¨æ–‡ä»¶æå–å®Œä¹‹ååˆ æ‰ä¸å†éœ€è¦çš„æ–‡ä»¶æ¥é¿å…åœ¨é•œåƒä¸­é¢å¤–æ·»åŠ ä¸€å±‚ã€‚æ¯”å¦‚å°½é‡é¿å…ä¸‹é¢çš„ç”¨æ³•ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ADD</span> http<span class="token punctuation">:</span>//example.com/big.tar.xz /usr/src/things/

<span class="token keyword">RUN</span> tar <span class="token punctuation">-</span>xJf /usr/src/things/big.tar.xz <span class="token punctuation">-</span>C /usr/src/things

<span class="token keyword">RUN</span> make <span class="token punctuation">-</span>C /usr/src/things all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è€Œæ˜¯åº”è¯¥ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹æ³•ï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">RUN</span> mkdir <span class="token punctuation">-</span>p /usr/src/things \
    &amp;&amp; curl <span class="token punctuation">-</span>SL http<span class="token punctuation">:</span>//example.com/big.tar.xz \
    <span class="token punctuation">|</span> tar <span class="token punctuation">-</span>xJC /usr/src/things \
    &amp;&amp; make <span class="token punctuation">-</span>C /usr/src/things all
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸Šé¢ä½¿ç”¨çš„ç®¡é“æ“ä½œï¼Œæ‰€ä»¥æ²¡æœ‰ä¸­é—´æ–‡ä»¶éœ€è¦åˆ é™¤ã€‚</p> <p>å¯¹äºå…¶ä»–ä¸éœ€è¦ <code>ADD</code> çš„è‡ªåŠ¨æå–åŠŸèƒ½çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>COPY</code>ã€‚</p> <h3 id="entrypoint"><a href="#entrypoint" class="header-anchor">#</a> ENTRYPOINT</h3> <p><code>ENTRYPOINT</code> çš„æœ€ä½³ç”¨å¤„æ˜¯è®¾ç½®é•œåƒçš„ä¸»å‘½ä»¤ï¼Œå…è®¸å°†é•œåƒå½“æˆå‘½ä»¤æœ¬èº«æ¥è¿è¡Œï¼ˆç”¨ <code>CMD</code> æä¾›é»˜è®¤é€‰é¡¹ï¼‰ã€‚</p> <p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹é•œåƒæä¾›äº†å‘½ä»¤è¡Œå·¥å…· <code>s3cmd</code>:</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;s3cmd&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">CMD</span> <span class="token punctuation">[</span><span class="token string">&quot;--help&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç°åœ¨ç›´æ¥è¿è¡Œè¯¥é•œåƒåˆ›å»ºçš„å®¹å™¨ä¼šæ˜¾ç¤ºå‘½ä»¤å¸®åŠ©ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run s3cmd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æˆ–è€…æä¾›æ­£ç¡®çš„å‚æ•°æ¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run s3cmd <span class="token function">ls</span> s3://mybucket
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ ·é•œåƒåå¯ä»¥å½“æˆå‘½ä»¤è¡Œçš„å‚è€ƒã€‚</p> <p><code>ENTRYPOINT</code> æŒ‡ä»¤ä¹Ÿå¯ä»¥ç»“åˆä¸€ä¸ªè¾…åŠ©è„šæœ¬ä½¿ç”¨ï¼Œå’Œå‰é¢å‘½ä»¤è¡Œé£æ ¼ç±»ä¼¼ï¼Œå³ä½¿å¯åŠ¨å·¥å…·éœ€è¦ä¸æ­¢ä¸€ä¸ªæ­¥éª¤ã€‚</p> <p>ä¾‹å¦‚ï¼Œ<code>Postgres</code> å®˜æ–¹é•œåƒä½¿ç”¨ä¸‹é¢çš„è„šæœ¬ä½œä¸º <code>ENTRYPOINT</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">set</span> -e

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token operator">=</span> <span class="token string">'postgres'</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">chown</span> -R postgres <span class="token string">&quot;<span class="token variable">$PGDATA</span>&quot;</span>

    <span class="token keyword">if</span> <span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> -A <span class="token string">&quot;<span class="token variable">$PGDATA</span>&quot;</span><span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        gosu postgres initdb
    <span class="token keyword">fi</span>

    <span class="token builtin class-name">exec</span> gosu postgres <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">exec</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>æ³¨æ„ï¼šè¯¥è„šæœ¬ä½¿ç”¨äº† Bash çš„å†…ç½®å‘½ä»¤ execï¼Œæ‰€ä»¥æœ€åè¿è¡Œçš„è¿›ç¨‹å°±æ˜¯å®¹å™¨çš„ PID ä¸º 1 çš„è¿›ç¨‹ã€‚è¿™æ ·ï¼Œè¿›ç¨‹å°±å¯ä»¥æ¥æ”¶åˆ°ä»»ä½•å‘é€ç»™å®¹å™¨çš„ Unix ä¿¡å·äº†ã€‚</p></blockquote> <p>è¯¥è¾…åŠ©è„šæœ¬è¢«æ‹·è´åˆ°å®¹å™¨ï¼Œå¹¶åœ¨å®¹å™¨å¯åŠ¨æ—¶é€šè¿‡ <code>ENTRYPOINT</code> æ‰§è¡Œï¼š</p> <div class="language-docker line-numbers-mode"><pre class="language-docker"><code><span class="token keyword">COPY</span> ./docker<span class="token punctuation">-</span>entrypoint.sh /

<span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;/docker-entrypoint.sh&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¯¥è„šæœ¬å¯ä»¥è®©ç”¨æˆ·ç”¨å‡ ç§ä¸åŒçš„æ–¹å¼å’Œ <code>Postgres</code> äº¤äº’ã€‚</p> <p>ä½ å¯ä»¥å¾ˆç®€å•åœ°å¯åŠ¨ <code>Postgres</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run postgres
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥æ‰§è¡Œ <code>Postgres</code> å¹¶ä¼ é€’å‚æ•°ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run postgres postgres --help
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æœ€åï¼Œä½ è¿˜å¯ä»¥å¯åŠ¨å¦å¤–ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å·¥å…·ï¼Œæ¯”å¦‚ <code>Bash</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>docker run --rm -it postgres <span class="token function">bash</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="volume"><a href="#volume" class="header-anchor">#</a> VOLUME</h3> <p><code>VOLUME</code> æŒ‡ä»¤ç”¨äºæš´éœ²ä»»ä½•æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œæˆ–å®¹å™¨åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ã€‚å¼ºçƒˆå»ºè®®ä½¿ç”¨ <code>VOLUME</code> æ¥ç®¡ç†é•œåƒä¸­çš„å¯å˜éƒ¨åˆ†å’Œç”¨æˆ·å¯ä»¥æ”¹å˜çš„éƒ¨åˆ†ã€‚</p> <h3 id="user"><a href="#user" class="header-anchor">#</a> USER</h3> <p>å¦‚æœæŸä¸ªæœåŠ¡ä¸éœ€è¦ç‰¹æƒæ‰§è¡Œï¼Œå»ºè®®ä½¿ç”¨ <code>USER</code> æŒ‡ä»¤åˆ‡æ¢åˆ°é root ç”¨æˆ·ã€‚å…ˆåœ¨ <code>Dockerfile</code> ä¸­ä½¿ç”¨ç±»ä¼¼ <code>RUN groupadd -r postgres &amp;&amp; useradd -r -g postgres postgres</code> çš„æŒ‡ä»¤åˆ›å»ºç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚</p> <blockquote><p>æ³¨æ„ï¼šåœ¨é•œåƒä¸­ï¼Œç”¨æˆ·å’Œç”¨æˆ·ç»„æ¯æ¬¡è¢«åˆ†é…çš„ UID/GID éƒ½æ˜¯ä¸ç¡®å®šçš„ï¼Œä¸‹æ¬¡é‡æ–°æ„å»ºé•œåƒæ—¶è¢«åˆ†é…åˆ°çš„ UID/GID å¯èƒ½ä¼šä¸ä¸€æ ·ã€‚å¦‚æœè¦ä¾èµ–ç¡®å®šçš„ UID/GIDï¼Œä½ åº”è¯¥æ˜¾ç¤ºçš„æŒ‡å®šä¸€ä¸ª UID/GIDã€‚</p></blockquote> <p>ä½ åº”è¯¥é¿å…ä½¿ç”¨ <code>sudo</code>ï¼Œå› ä¸ºå®ƒä¸å¯é¢„æœŸçš„ TTY å’Œä¿¡å·è½¬å‘è¡Œä¸ºå¯èƒ½é€ æˆçš„é—®é¢˜æ¯”å®ƒèƒ½è§£å†³çš„é—®é¢˜è¿˜å¤šã€‚å¦‚æœä½ çœŸçš„éœ€è¦å’Œ <code>sudo</code> ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚ï¼Œä»¥ root æƒé™åˆå§‹åŒ–æŸä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œä»¥é root æƒé™æ‰§è¡Œå®ƒï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨ <a href="https://github.com/tianon/gosu" target="_blank" rel="noopener noreferrer">gosu<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>æœ€åï¼Œä¸ºäº†å‡å°‘å±‚æ•°å’Œå¤æ‚åº¦ï¼Œé¿å…é¢‘ç¹åœ°ä½¿ç”¨ <code>USER</code> æ¥å›åˆ‡æ¢ç”¨æˆ·ã€‚</p> <h3 id="workdir"><a href="#workdir" class="header-anchor">#</a> WORKDIR</h3> <p>ä¸ºäº†æ¸…æ™°æ€§å’Œå¯é æ€§ï¼Œä½ åº”è¯¥æ€»æ˜¯åœ¨ <code>WORKDIR</code> ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚å¦å¤–ï¼Œä½ åº”è¯¥ä½¿ç”¨ <code>WORKDIR</code> æ¥æ›¿ä»£ç±»ä¼¼äº <code>RUN cd ... &amp;&amp; do-something</code> çš„æŒ‡ä»¤ï¼Œåè€…éš¾ä»¥é˜…è¯»ã€æ’é”™å’Œç»´æŠ¤ã€‚</p> <h2 id="å®˜æ–¹é•œåƒç¤ºä¾‹"><a href="#å®˜æ–¹é•œåƒç¤ºä¾‹" class="header-anchor">#</a> å®˜æ–¹é•œåƒç¤ºä¾‹</h2> <p>è¿™äº›å®˜æ–¹é•œåƒçš„ Dockerfile éƒ½æ˜¯å‚è€ƒå…¸èŒƒï¼š<a href="https://github.com/docker-library/docs" target="_blank" rel="noopener noreferrer">https://github.com/docker-library/docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/meowv/docs/edit/master//stack/docker/best_practices/README.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">a year ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/stack/docker/command/dockerd.html" class="prev">
        æœåŠ¡ç«¯å‘½ä»¤(dockerd)
      </a></span> <span class="next"><a href="/stack/docker/debug/">
        å¦‚ä½•è°ƒè¯• Docker
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><canvas id="vuepress-canvas-cursor"></canvas><!----><!----></div></div>
    <script src="/assets/js/app.31cd6076.js" defer></script><script src="/assets/js/2.887f4612.js" defer></script><script src="/assets/js/102.2c376caa.js" defer></script>
  </body>
</html>
